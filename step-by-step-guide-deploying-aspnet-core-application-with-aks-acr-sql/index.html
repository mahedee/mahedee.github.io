<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.6 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Step-by-Step Guide: Deploying an ASP.NET Core Application with Azure Kubernetes Services, Azure SQL Server, and Azure Container Registry - Think Simple</title>
<meta name="description" content="Securing RabbitMQ with SSL/TLS and enabling HTTPS access for the Management UI is essential to protect data and ensure a secure environment. This guide walks you through the steps to set up RabbitMQ with SSL/TLS on Docker Desktop and enable HTTPS for the Management UI. Follow along to configure RabbitMQ to handle encrypted AMQP connections as well as a secure Management interface.">


  <meta name="author" content="Mahedee Hasan">


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Think Simple">
<meta property="og:title" content="Step-by-Step Guide: Deploying an ASP.NET Core Application with Azure Kubernetes Services, Azure SQL Server, and Azure Container Registry">
<meta property="og:url" content="https://mahedee.net/step-by-step-guide-deploying-aspnet-core-application-with-aks-acr-sql/">


  <meta property="og:description" content="Securing RabbitMQ with SSL/TLS and enabling HTTPS access for the Management UI is essential to protect data and ensure a secure environment. This guide walks you through the steps to set up RabbitMQ with SSL/TLS on Docker Desktop and enable HTTPS for the Management UI. Follow along to configure RabbitMQ to handle encrypted AMQP connections as well as a secure Management interface.">







  <meta property="article:published_time" content="2024-07-07T00:00:00-04:00">





  

  


<link rel="canonical" href="https://mahedee.net/step-by-step-guide-deploying-aspnet-core-application-with-aks-acr-sql/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Mahedee Hasan",
      "url": "https://mahedee.net/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Think Simple Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



<!-- SEO tags -->
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Step-by-Step Guide: Deploying an ASP.NET Core Application with Azure Kubernetes Services, Azure SQL Server, and Azure Container Registry | Think Simple</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Step-by-Step Guide: Deploying an ASP.NET Core Application with Azure Kubernetes Services, Azure SQL Server, and Azure Container Registry" />
<meta name="author" content="Mahedee Hasan" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Securing RabbitMQ with SSL/TLS and enabling HTTPS access for the Management UI is essential to protect data and ensure a secure environment. This guide walks you through the steps to set up RabbitMQ with SSL/TLS on Docker Desktop and enable HTTPS for the Management UI. Follow along to configure RabbitMQ to handle encrypted AMQP connections as well as a secure Management interface." />
<meta property="og:description" content="Securing RabbitMQ with SSL/TLS and enabling HTTPS access for the Management UI is essential to protect data and ensure a secure environment. This guide walks you through the steps to set up RabbitMQ with SSL/TLS on Docker Desktop and enable HTTPS for the Management UI. Follow along to configure RabbitMQ to handle encrypted AMQP connections as well as a secure Management interface." />
<link rel="canonical" href="https://mahedee.net/step-by-step-guide-deploying-aspnet-core-application-with-aks-acr-sql/" />
<meta property="og:url" content="https://mahedee.net/step-by-step-guide-deploying-aspnet-core-application-with-aks-acr-sql/" />
<meta property="og:site_name" content="Think Simple" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-07-07T00:00:00-04:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Step-by-Step Guide: Deploying an ASP.NET Core Application with Azure Kubernetes Services, Azure SQL Server, and Azure Container Registry" />
<meta name="twitter:site" content="@" />
<meta name="twitter:creator" content="@Mahedee Hasan" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Mahedee Hasan"},"dateModified":"2024-07-07T00:00:00-04:00","datePublished":"2024-07-07T00:00:00-04:00","description":"Securing RabbitMQ with SSL/TLS and enabling HTTPS access for the Management UI is essential to protect data and ensure a secure environment. This guide walks you through the steps to set up RabbitMQ with SSL/TLS on Docker Desktop and enable HTTPS for the Management UI. Follow along to configure RabbitMQ to handle encrypted AMQP connections as well as a secure Management interface.","headline":"Step-by-Step Guide: Deploying an ASP.NET Core Application with Azure Kubernetes Services, Azure SQL Server, and Azure Container Registry","mainEntityOfPage":{"@type":"WebPage","@id":"https://mahedee.net/step-by-step-guide-deploying-aspnet-core-application-with-aks-acr-sql/"},"url":"https://mahedee.net/step-by-step-guide-deploying-aspnet-core-application-with-aks-acr-sql/"}</script>
<!-- End Jekyll SEO tag -->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->



     
  </head>

  <body class="layout--single wide">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Think Simple
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/" >Home</a>
            </li><li class="masthead__menu-item">
              <a href="/categories" >Categories</a>
            </li><li class="masthead__menu-item">
              <a href="/about/" >About</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="/assets/images/me.jpg" alt="Mahedee Hasan" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Mahedee Hasan</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>I am a Microsoft MVP (10th times), programmer, software developer, software architect, consultant, author, researcher, technical blogger, technical speaker, trainer and learner. I have more than 15 years experience in the field of software design and development.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Toronto, Ontario, Canada</span>
        </li>
      

      
        
          
            <li><a href="mailto:mahedee.hasan@gmail.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
          
        
          
            <li><a href="https://mahedee.net" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> Website</a></li>
          
        
          
            <li><a href="https://mvp.microsoft.com/en-us/PublicProfile/5001294" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-award" aria-hidden="true"></i> MVP</a></li>
          
        
          
            <li><a href="https://www.linkedin.com/in/mahedee/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li>
          
        
          
            <li><a href="https://twitter.com/mahedeehasan" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
          
        
          
            <li><a href="https://facebook.com/mahedee19" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i> Facebook</a></li>
          
        
          
            <li><a href="https://github.com/mahedee" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
          
        
          
            <li><a href="https://www.buymeacoffee.com/mahedee" rel="nofollow noopener noreferrer"><i class="fab fa fa-coffee" aria-hidden="true"></i> Buy me a Coffee</a></li>
          
        
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Step-by-Step Guide: Deploying an ASP.NET Core Application with Azure Kubernetes Services, Azure SQL Server, and Azure Container Registry">
    <meta itemprop="description" content="Securing RabbitMQ with SSL/TLS and enabling HTTPS access for the Management UI is essential to protect data and ensure a secure environment. This guide walks you through the steps to set up RabbitMQ with SSL/TLS on Docker Desktop and enable HTTPS for the Management UI. Follow along to configure RabbitMQ to handle encrypted AMQP connections as well as a secure Management interface.">
    <meta itemprop="datePublished" content="July 07, 2024">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Step-by-Step Guide: Deploying an ASP.NET Core Application with Azure Kubernetes Services, Azure SQL Server, and Azure Container Registry
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  15 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p><strong>What is Azure Kubernetes Services (AKS)?</strong> 
Azure Kubernetes Services (AKS) is a managed Kubernetes service provided by Microsoft Azure. It offers a simplified way to deploy, manage, and scale containerized applications using Kubernetes. AKS is a fully managed service that eliminates the complexity of managing Kubernetes clusters, allowing you to focus on building and deploying your applications.</p>

<p><strong>What is Azure SQL Server?</strong>
Azure SQL Server is a managed relational database service provided by Microsoft Azure. It offers a scalable, secure, and fully managed database service that is compatible with SQL Server. Azure SQL Server provides high availability, automatic backups, and built-in security features to protect your data.</p>

<p><strong>What is Azure Container Registry (ACR)?</strong>
Azure Container Registry (ACR) is a managed container registry provided by Microsoft Azure. It allows you to store and manage container images securely in the cloud. ACR integrates with Azure services like Azure Kubernetes Services (AKS) to simplify the deployment of containerized applications.</p>

<p>In this article, you’ll learn how to deploy an ASP.NET Core application using Azure Kubernetes Services (AKS), Azure SQL Server, and Azure Container Registry (ACR). The steps below assume you have some basic familiarity with ASP.NET Core, Azure services, and Docker.</p>

<p><strong>Prerequisites</strong>
Before you begin, ensure you have the following:</p>
<ul>
  <li>An Azure subscription (create a free account if you don’t have one)</li>
  <li>Azure CLI installed on your local machine</li>
  <li>Docker Desktop installed on your local machine</li>
  <li>Visual Studio or any other code editor</li>
  <li>Basic knowledge of ASP.NET Core, Docker, and Kubernetes</li>
  <li>Kubectl installed on your local machine</li>
</ul>

<p><strong>Step 1: Create an Azure SQL Database</strong></p>
<ul>
  <li>Open the Azure portal and sign in with your Azure account.</li>
  <li>Click on the “Create a resource” button and search for “SQL Database”.</li>
  <li>Click on the “Create” button to create a new SQL Database.</li>
  <li>Fill in the required details like server name, database name, resource group, and pricing tier.</li>
  <li>Click on the “Review + create” button to create the SQL Database.</li>
</ul>

<p>or</p>
<ul>
  <li>Login to Azure CLI</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az login
</code></pre></div></div>

<ul>
  <li>Create a resource group for the SQL Server and Database</li>
  <li>Create a SQL Server and Database using Azure CLI</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create a resource group</span>
az group create <span class="nt">--name</span> &lt;ResourceGroupName&gt; <span class="nt">--location</span> &lt;Location&gt;

<span class="c"># Create a SQL Server</span>
az sql server create <span class="nt">--name</span> &lt;SqlServerName&gt; <span class="nt">--resource-group</span> &lt;ResourceGroupName&gt; <span class="nt">--location</span> &lt;Location&gt; <span class="nt">--admin-user</span> &lt;AdminUser&gt; <span class="nt">--admin-password</span> &lt;AdminPassword&gt;

<span class="c"># Create a SQL Database with the S0 pricing tier</span>
az sql db create <span class="nt">--resource-group</span> &lt;ResourceGroupName&gt; <span class="nt">--server</span> &lt;SqlServerName&gt; <span class="nt">--name</span> &lt;DatabaseName&gt; <span class="nt">--service-objective</span> S0
</code></pre></div></div>

<p>Example of creating a SQL Server and Database using Azure CLI:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create a resource group named myresourcegroup in the westus location</span>
az group create <span class="nt">--name</span> myresourcegroup <span class="nt">--location</span> westus

<span class="c"># Create a SQL Server named myserver in the myresourcegroup resource group with the admin user mahedee and password mypass@123</span>
az sql server create <span class="nt">--name</span> mahedeesqlserver <span class="nt">--resource-group</span> myresourcegroup <span class="nt">--location</span> westus <span class="nt">--admin-user</span> mahedee <span class="nt">--admin-password</span> mypass@123

<span class="c"># Create a SQL Database named mydatabase in the myresourcegroup resource group with the S0 pricing tier</span>
az sql db create <span class="nt">--resource-group</span> myresourcegroup <span class="nt">--server</span> mahedeesqlserver <span class="nt">--name</span> HRMDB <span class="nt">--service-objective</span> S0
</code></pre></div></div>

<ul>
  <li>Set Up Firewall Rules Allow your local machine or AKS to access the SQL server.</li>
  <li>Try to connect to the SQL Server using SQL Server Management Studio (SSMS) or Azure Data Studio to verify the connection.</li>
  <li>You will get a message that the IP address is not allowed to access the server.</li>
  <li>It will show the IP address range that is need to be added to the firewall rules.</li>
  <li>Collect start and end IP address range from the error message and add the IP address range to the firewall rules using the Azure CLI.</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Allow your local machine to access the SQL server</span>
az sql server firewall-rule create <span class="nt">--resource-group</span> myresourcegroup <span class="nt">--server</span> mahedeesqlserver <span class="nt">--name</span> AllowLocalMachine <span class="nt">--start-ip-address</span> &lt;YourIPAddress&gt; <span class="nt">--end-ip-address</span> &lt;YourIPAddress&gt;
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Example: Allow your local machine to access the SQL server</span>
az sql server firewall-rule create <span class="nt">--resource-group</span> myresourcegroup <span class="nt">--server</span> mahedeesqlserver <span class="nt">--name</span> AllowLocalMachine <span class="nt">--start-ip-address</span> 162.237.182.0 <span class="nt">--end-ip-address</span> 162.237.182.255
</code></pre></div></div>

<p><strong>Step 2: Create an ASP.NET Core Application</strong></p>

<ul>
  <li>Create a new ASP.NET Core application using Visual Studio or the .NET CLI.</li>
  <li>Install the required NuGet packages for Azure SQL Database and Entity Framework Core.</li>
  <li>Configure the connection string to your Azure SQL Database.</li>
  <li>Create the required models and DbContext for your application.</li>
  <li>Add the required services and middleware to your application.</li>
  <li>Build and run your ASP.NET Core application locally to test it.</li>
</ul>

<p>In this Article I have created an asp.net core web api application name HRM.API. Source of the application is given at the end of the article.</p>

<ul>
  <li>
    <p>Now create a Dockerfile in the root of your project to containerize your ASP.NET Core application.</p>
  </li>
  <li>
    <p>I have added lot of comments in the Dockerfile to explain each step.</p>
  </li>
</ul>

<p><strong>Dockerfile</strong></p>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Define the base image</span>
<span class="c"># Use the official ASP.NET Core runtime image the alias base sets here to use it in the next stage</span>

<span class="c"># Switches the execution to a user named app. This is a security best practice to avoid running as root.</span>
<span class="c"># The app user must exist in the aspnet:8.0 image. If not, this command will fail unless the user is created beforehand.</span>

<span class="c"># Sets the working directory to /app. All subsequent commands in this stage will be relative to this directory.</span>

<span class="c"># Informs Docker that the container will listen on ports 8080 and 8081. </span>
<span class="c"># This is for documentation purposes and does not expose the ports to the host by itself; you need to publish these ports explicitly with docker run -p.</span>

<span class="k">FROM</span><span class="w"> </span><span class="s">mcr.microsoft.com/dotnet/aspnet:8.0</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="s">base</span>
<span class="k">USER</span><span class="s"> app</span>
<span class="k">WORKDIR</span><span class="s"> /app</span>
<span class="k">EXPOSE</span><span class="s"> 8080</span>
<span class="k">EXPOSE</span><span class="s"> 8081</span>


<span class="c"># Define the Build Stage</span>
<span class="c"># Use the official ASP.NET Core SDK image to build the application</span>
<span class="c"># Set the working directory to /src. This directory will be existing only in the build stage.</span>
<span class="c"># Copies all files from the current directory on the host machine to the /src directory in the container.</span>
<span class="c"># Restores project dependencies from the .csproj file. This ensures all necessary NuGet packages are downloaded.</span>
<span class="c"># Builds the application in Release configuration and outputs the compiled files to the /app directory inside the container.</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">mcr.microsoft.com/dotnet/sdk:8.0</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="s">build</span>
<span class="k">WORKDIR</span><span class="s"> /src</span>
<span class="k">COPY</span><span class="s"> . .</span>
<span class="k">RUN </span>dotnet restore
<span class="k">RUN </span>dotnet publish <span class="nt">-c</span> Release <span class="nt">-o</span> /app

<span class="c"># Final State</span>
<span class="c"># Use the base image defined in the first stage.</span>
<span class="c"># Set the working directory to /app.</span>
<span class="c"># Copies the compiled application from the build stage to the /app directory in the final image.</span>
<span class="c"># Defines the command to run when the container starts. Here, it launches the application by executing the .NET runtime to run the HRM.API.dll file.</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">base</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="s">final</span>
<span class="k">WORKDIR</span><span class="s"> /app</span>
<span class="k">COPY</span><span class="s"> --from=build /app .</span>
<span class="k">ENTRYPOINT</span><span class="s"> ["dotnet", "HRM.API.dll"]</span>

<span class="c"># You can see only the app directory in the final image because Multi-stage builds isolate the content of each stage from the other stages.</span>
<span class="c"># Docker multi-stage build process implicitly discards everything in the intermediate stages when the final stage is built.</span>
</code></pre></div></div>

<ul>
  <li>Build and Test the Docker Image Locally</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Build the Docker image using the Dockerfile</span>
docker build <span class="nt">-t</span> hrm:latest <span class="nb">.</span>

<span class="c"># Run the Docker image locally</span>
docker run <span class="nt">-p</span> 8080:8080 hrm:latest
</code></pre></div></div>

<p>Access your application at http://localhost:8080/swagger/index.html to verify it works.</p>

<p><strong>Step 3: Create an Azure Container Registry (ACR)</strong></p>
<ul>
  <li>Open the Azure portal and sign in with your Azure account.</li>
  <li>Click on “Create a resource” and search for “Container Registry”.</li>
  <li>Select “Container Registry” and click on “Create”.</li>
  <li>Fill in the required details like registry name, resource group, location, and SKU.</li>
  <li>Click on “Review + create” and then “Create” to create the ACR.</li>
</ul>

<p>or</p>
<ul>
  <li>Create an Azure Container Registry using Azure CLI</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create a resource group for the ACR</span>
<span class="c"># Since we already have a resource group, we can skip this step</span>
az group create <span class="nt">--name</span> &lt;ResourceGroupName&gt; <span class="nt">--location</span> &lt;Location&gt;

<span class="c"># Create an ACR</span>
az acr create <span class="nt">--name</span> &lt;ACRName&gt; <span class="nt">--resource-group</span> &lt;ResourceGroupName&gt; <span class="nt">--sku</span> Basic <span class="nt">--location</span> &lt;Location&gt;
</code></pre></div></div>

<p>Example of creating an Azure Container Registry using Azure CLI:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create a resource group named myresourcegroup in the westus location</span>
<span class="c"># Since we already have a resource group, we can skip this step</span>
az group create <span class="nt">--name</span> myresourcegroup <span class="nt">--location</span> westus

<span class="c"># Create an ACR named myacr in the myresourcegroup resource group with the Basic SKU</span>
az acr create <span class="nt">--name</span> mh17acr <span class="nt">--resource-group</span> myresourcegroup <span class="nt">--sku</span> Basic <span class="nt">--location</span> westus
</code></pre></div></div>

<p><strong>Step 4: Push the Docker Image to Azure Container Registry (ACR)</strong></p>
<ul>
  <li>Tag the Docker image with the ACR URL. Tagging the image with the ACR URL is required to push the image to the ACR.</li>
  <li>Log in to the ACR using the Azure CLI.</li>
  <li>Push the Docker image to the ACR.</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Tag the Docker image with the ACR URL</span>
docker tag hrm:latest &lt;ACRName&gt;.azurecr.io/hrm:latest
<span class="c"># Login to the ACR using the Azure CLI</span>
az acr login <span class="nt">--name</span> &lt;ACRName&gt;
<span class="c"># Push the Docker image to the ACR</span>
docker push &lt;ACRName&gt;.azurecr.io/hrm:latest
</code></pre></div></div>
<p>Example of pushing a Docker image to Azure Container Registry using Azure CLI:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Tag the Docker image with the ACR URL</span>
docker tag hrm:latest mh17acr.azurecr.io/hrm:latest
<span class="c"># Login to the ACR using the Azure CLI</span>
az acr login <span class="nt">--name</span> mh17acr
<span class="c"># Push the Docker image to the ACR</span>
docker push mh17acr.azurecr.io/hrm:latest
</code></pre></div></div>
<ul>
  <li>Verify that the Docker image is successfully pushed to the ACR by checking the ACR in the Azure portal. or using Azure CLI</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># List the repositories in the ACR</span>
az acr repository list <span class="nt">--name</span> &lt;ACRName&gt; <span class="nt">--output</span> table
</code></pre></div></div>
<p>Example of listing the repositories in the ACR using Azure CLI:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c"># List the repositories in the ACR</span>
  az acr repository list <span class="nt">--name</span> mh17acr <span class="nt">--output</span> table
</code></pre></div></div>

<p><strong>Step 5: Create an Azure Kubernetes Services (AKS) Cluster</strong></p>
<ul>
  <li>Open the Azure portal and sign in with your Azure account.</li>
  <li>Click on the “Create a resource” button and search for “Kubernetes Service”.</li>
  <li>Click on “Create” to create a new AKS cluster.</li>
  <li>Fill in the required information, such as the resource group, location, and cluster name.</li>
  <li>Basics Tab:
    <ul>
      <li>Subscription: Choose your Azure subscription.</li>
      <li>Resource Group: Create a new resource group or select an existing one.</li>
      <li>Kubernetes Cluster Name: Enter a unique name for your AKS cluster.</li>
      <li>Region: Select the region for your cluster.</li>
      <li>Click “Next: Node Pools” to proceed.</li>
    </ul>
  </li>
  <li>Node Pools Tab:
    <ul>
      <li>Click “Add a node pool” to add a new node pool.</li>
      <li>Node Pool Name: Enter a name for the node pool.</li>
      <li>Virtual Machine Size: Choose the VM size for the node pool.</li>
      <li>Node Count: Enter the number of nodes in the pool.</li>
      <li>Click “Next: Authentication” to proceed.</li>
    </ul>
  </li>
  <li>Authentication Tab:
    <ul>
      <li>Leave the default settings for authentication.</li>
      <li>Click “Next: Networking” to proceed.</li>
    </ul>
  </li>
  <li>Networking Tab:
    <ul>
      <li>Leave the default settings for networking.</li>
      <li>Click “Next: Monitoring” to proceed.</li>
    </ul>
  </li>
  <li>Monitoring Tab:
    <ul>
      <li>Enable monitoring if required.</li>
      <li>Click “Next: Tags” to proceed.</li>
    </ul>
  </li>
  <li>Tags Tab:
    <ul>
      <li>Add any required tags to the cluster.</li>
      <li>Click “Next: Review + create” to proceed.</li>
    </ul>
  </li>
  <li>Review + create Tab:
    <ul>
      <li>Review the cluster configuration.</li>
      <li>Click “Create” to create the AKS cluster.</li>
    </ul>
  </li>
  <li>Click on “Review + create” and then “Create” to create the AKS cluster.</li>
  <li>Once the cluster is created, click on the “Connect” button to connect to the cluster using kubectl.</li>
</ul>

<p>or</p>
<ul>
  <li>Create an AKS cluster using Azure CLI</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create a resource group for the AKS cluster</span>
az group create <span class="nt">--name</span> &lt;ResourceGroupName&gt; <span class="nt">--location</span> &lt;Location&gt;
<span class="c"># Create an AKS cluster</span>
az aks create <span class="nt">--resource-group</span> &lt;ResourceGroupName&gt; <span class="nt">--name</span> &lt;AKSName&gt; <span class="nt">--node-count</span> &lt;NumberOfNodes&gt; <span class="nt">--enable-addons</span> monitoring <span class="nt">--generate-ssh-keys</span>
</code></pre></div></div>
<p>Example of creating an AKS cluster using Azure CLI:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create a resource group for the AKS cluster</span>
<span class="c"># Since we already have a resource group, we can skip this step</span>
az group create <span class="nt">--name</span> myresourcegroup <span class="nt">--location</span> westus

<span class="c"># Create an AKS cluster</span>
az aks create <span class="nt">--resource-group</span> myresourcegroup <span class="nt">--name</span> myakscluster <span class="nt">--node-count</span> 1 <span class="nt">--enable-addons</span> monitoring <span class="nt">--generate-ssh-keys</span> <span class="nt">--location</span> westus <span class="nt">--kubernetes-version</span> 1.29.9 <span class="nt">--node-vm-size</span> Standard_B2s <span class="nt">--enable-cluster-autoscaler</span> <span class="nt">--min-count</span> 1 <span class="nt">--max-count</span> 3
</code></pre></div></div>
<p>Note: Sometimes, CLI commands may not work due to the version of the CLI. In that case, you can use the Azure portal to create the AKS cluster.</p>

<ul>
  <li>Now Connect to the AKS cluster. Use the following command to connect to the AKS cluster:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az aks get-credentials <span class="nt">--resource-group</span> &lt;ResourceGroupName&gt; <span class="nt">--name</span> &lt;AKSName&gt;
</code></pre></div></div>

<p>Example of connecting to an AKS cluster using Azure CLI:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Connect to the AKS cluster</span>
az aks get-credentials <span class="nt">--resource-group</span> myresourcegroup <span class="nt">--name</span> myakscluster

<span class="c"># Output</span>
Merged <span class="s2">"myakscluster"</span> as current context <span class="k">in</span> /Users/username/.kube/config
</code></pre></div></div>

<ul>
  <li>To get the list of contexts, run the following command:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl config get-contexts
</code></pre></div></div>
<ul>
  <li>To switch to a different context, run the following command:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl config use-context &lt;ContextName&gt;
</code></pre></div></div>

<p><strong>Step 6: Link ACR(Azure Container Registry) to AKS</strong>
If the Azure Kubernetes Service (AKS) cluster is not linked to your ACR, Kubernetes cannot pull the image.</p>

<p>Run the following command to allow AKS to access your ACR:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az aks update <span class="nt">-n</span> &lt;aks-cluster-name&gt; <span class="nt">-g</span> &lt;resource-group-name&gt; <span class="nt">--attach-acr</span> mh17acr
</code></pre></div></div>

<p>Example of linking an ACR to an AKS cluster using Azure CLI:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Link the ACR to the AKS cluster</span>
az aks update <span class="nt">-n</span> myakscluster <span class="nt">-g</span> myresourcegroup <span class="nt">--attach-acr</span> mh17acr 
</code></pre></div></div>

<p><strong>Step 7: Deploy the ASP.NET Core Application to AKS</strong></p>

<ul>
  <li>Connect to the AKS cluster</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az aks get-credentials <span class="nt">--resource-group</span> &lt;ResourceGroupName&gt; <span class="nt">--name</span> &lt;AKSName&gt;
</code></pre></div></div>

<p>Example of connecting to an AKS cluster using Azure CLI:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Connect to the AKS cluster</span>
az aks get-credentials <span class="nt">--resource-group</span> myresourcegroup <span class="nt">--name</span> myakscluster

<span class="c"># Output</span>
Merged <span class="s2">"myakscluster"</span> as current context <span class="k">in</span> /Users/username/.kube/config
</code></pre></div></div>

<ul>
  <li>To get the list of contexts, run the following command:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl config get-contexts
</code></pre></div></div>
<ul>
  <li>To switch to a different context, run the following command:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl config use-context &lt;ContextName&gt;
</code></pre></div></div>

<ul>
  <li>Create a Kubernetes Pod for the ASP.NET Core application</li>
  <li>
    <p>Here I used lots of comments to explain each section of the yaml file. You can remove the comments before using it.</p>

    <p><strong>pod_aks.yml</strong></p>
  </li>
</ul>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Pod</span> <span class="c1"># Pod is the smallest deployable unit in Kubernetes and it represents a single instance of a running process in your cluster.</span>
<span class="na">metadata</span><span class="pi">:</span> <span class="c1"># Metadata section provides information about the Pod</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">hrm-pod</span> <span class="c1"># Name of the Pod. Name must be unique within the namespace.</span>
  <span class="na">labels</span><span class="pi">:</span>       <span class="c1"># Labels are key/value pairs that are attached to objects, such as pods. Labels are intended to be used to specify identifying attributes of objects that are meaningful and relevant to users.</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">hrm-api</span>

<span class="c1"># Specification for the Pod</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">containers</span><span class="pi">:</span> <span class="c1"># List of containers within the Pod</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">hrm-ctr</span>
      <span class="na">image</span><span class="pi">:</span> <span class="s">mh17acr.azurecr.io/hrm:latest</span> 
      <span class="na">ports</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">containerPort</span><span class="pi">:</span> <span class="m">8080</span> <span class="c1"># Port that the container will expose</span>
      <span class="na">env</span><span class="pi">:</span> <span class="c1"># List of environment variables to set in the container</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">ConnectionStrings__DefaultConnection</span> <span class="c1"># Name of the environment variable. Here __ is used to represent the hierarchy of the connection string. It means ConnectionStrings:DefaultConnection</span>
          <span class="na">value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Server=mahedeesqlserver.database.windows.net;Database=HRMDB;User</span><span class="nv"> </span><span class="s">Id=mahedee;Password=mypass@123;MultipleActiveResultSets=true"</span>
  
</code></pre></div></div>

<ul>
  <li>Create a Kubernetes Service for the ASP.NET Core application</li>
  <li>
    <p>Here I used lots of comments to explain each section of the yaml file. You can remove the comments before using it.</p>

    <p><strong>service_aks.yml</strong></p>
  </li>
</ul>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">hrm-api</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">hrm-service</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">LoadBalancer</span>
  <span class="na">ports</span><span class="pi">:</span>
    <span class="c1"># First port configuration</span>
    <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">8011</span> <span class="c1"># Port that the service will expose</span>
      <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span> <span class="c1"># Protocol that the service will use</span>
      <span class="na">targetPort</span><span class="pi">:</span> <span class="m">8080</span> <span class="c1"># Port on the container where traffic will be directed</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">http</span> <span class="c1"># Name of the port (useful for service discovery)</span>
      <span class="na">nodePort</span><span class="pi">:</span> <span class="m">30376</span> <span class="c1"># Specific port on the cluster nodes to expose (used with NodePort/LoadBalancer services)</span>
    <span class="c1"># Second port configuration</span>
    <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">8081</span> <span class="c1"># Port that the service will expose</span>
      <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span> <span class="c1"># Protocol that the service will use</span>
      <span class="na">targetPort</span><span class="pi">:</span> <span class="m">8081</span> <span class="c1"># Port on the container where traffic will be directed</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">https</span> <span class="c1"># Name of the port (useful for service discovery)</span>
      <span class="na">nodePort</span><span class="pi">:</span> <span class="m">30676</span> <span class="c1"># Specific port on the cluster nodes to expose (used with NodePort/LoadBalancer services)</span>
  <span class="c1"># Selector matches Pods with the label "app: hrm-api"</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">hrm-api</span>
<span class="na">status</span><span class="pi">:</span>
  <span class="na">loadBalancer</span><span class="pi">:</span> <span class="pi">{}</span> <span class="c1"># Placeholder for LoadBalancer details (IP or DNS name) once provisioned</span>

<span class="c1"># Use spaces (2 or 4 spaces) for indentation in YAML files; tabs are not allowed.</span>
<span class="c1"># The YAML specification prohibits the use of tabs, and using spaces ensures consistency and proper parsing.</span>
  
</code></pre></div></div>

<ul>
  <li>
    <p>Deploy the ASP.NET Core application to the AKS cluster</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl apply <span class="nt">-f</span> pod_aks.yml
kubectl apply <span class="nt">-f</span> service_aks.yml
</code></pre></div>    </div>
  </li>
  <li>
    <p>Verify that the ASP.NET Core application is deployed to the AKS cluster by checking the pods and services in the Kubernetes dashboard or using the following commands:</p>
  </li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  kubectl get pods

  Output:

  NAME      READY   STATUS    RESTARTS   AGE
  hrm-pod   1/1     Running   0          16s
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  kubectl get svc

  Output:
  NAME          TYPE           CLUSTER-IP   EXTERNAL-IP      PORT<span class="o">(</span>S<span class="o">)</span>                         AGE
  hrm-service   LoadBalancer   10.0.80.25   52.137.187.193   8011:30376/TCP,8081:30676/TCP   24s
  kubernetes    ClusterIP      10.0.0.1     &lt;none&gt;           443/TCP                         21m
</code></pre></div></div>

<ul>
  <li>Access the ASP.NET Core application using the external IP address of the service.</li>
  <li>In this access the application using the following URL:</li>
</ul>

<p>http://52.137.187.193:8011/swagger/index.html</p>

<ul>
  <li>To delete the pod and service, use the following commands:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl delete <span class="nt">-f</span> pod_aks.yml
kubectl delete <span class="nt">-f</span> service_aks.yml
</code></pre></div></div>

<ul>
  <li>Command to get log of a pod
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl logs <span class="nt">-f</span> hrm-pod
</code></pre></div>    </div>
  </li>
</ul>

<p><strong>Trouble Shooting: Application cannot connect to the Azure SQL Database</strong></p>
<ul>
  <li>Run the following command to check the logs of the pod to identify any connection issues:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl logs <span class="nt">-f</span> hrm-pod
</code></pre></div>    </div>
  </li>
  <li>You will get the error message in the logs if there is any issue connecting to the Azure SQL Database.</li>
  <li>It says AKS pod cannot connect to the Azure SQL Database. It will show source IP address is not allowed to access the server.</li>
  <li>To resolve this issue, you need to allow the AKS cluster’s IP address to access the Azure SQL Database.</li>
  <li>Run the following command to set up the firewall rule to allow the AKS cluster’s IP address to access the Azure SQL Database:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az sql server firewall-rule create <span class="nt">--resource-group</span> &lt;ResourceGroupName&gt; <span class="nt">--server</span> &lt;SqlServerName&gt; <span class="nt">--name</span> AllowAKSIP <span class="nt">--start-ip-address</span> 13.64.73.58 <span class="nt">--end-ip-address</span> 13.64.73.58
</code></pre></div>    </div>
    <p>Example:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az sql server firewall-rule create <span class="nt">--resource-group</span> &lt;ResourceGroupName&gt; <span class="nt">--server</span> &lt;SqlServerName&gt; <span class="nt">--name</span> AllowAKSIP <span class="nt">--start-ip-address</span> 13.64.73.58 <span class="nt">--end-ip-address</span> 13.64.73.58
</code></pre></div>    </div>
  </li>
  <li>After setting up the firewall rule, try to access the Azure SQL Database from the AKS pod again. The connection should be successful now.</li>
  <li>Kubernetes pods ip address can be changed after restart. So, it is better to use static ip address for the AKS cluster.</li>
</ul>

<p><strong>Common Commands:</strong></p>

<ul>
  <li>To update azur CLI run the following command:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az upgrade
</code></pre></div></div>

<ul>
  <li>To know the region of the AKS cluster, run the following command:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az aks show <span class="nt">-n</span> &lt;aks-cluster-name&gt; <span class="nt">-g</span> &lt;resource-group-name&gt; <span class="nt">--query</span> location <span class="nt">-o</span> tsv
</code></pre></div>    </div>
  </li>
  <li>To know the region of the Azure SQL Database, run the following command:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az sql server show <span class="nt">-n</span> &lt;sql-server-name&gt; <span class="nt">-g</span> &lt;resource-group-name&gt; <span class="nt">--query</span> location <span class="nt">-o</span> tsv
</code></pre></div>    </div>
  </li>
  <li>To know the ip address of the AKS cluster, run the following command:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az aks show <span class="nt">-n</span> &lt;aks-cluster-name&gt; <span class="nt">-g</span> &lt;resource-group-name&gt; <span class="nt">--query</span> outboundIpAddresses <span class="nt">-o</span> tsv
</code></pre></div>    </div>
  </li>
  <li>To get list of contexts, run the following command:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl config get-contexts
</code></pre></div>    </div>
  </li>
  <li>To switch to a different context, run the following command:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl config use-context &lt;context-name&gt;
</code></pre></div>    </div>
  </li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get pods <span class="nt">--watch</span>  <span class="c"># Watch the pods in the current namespace</span>
</code></pre></div></div>

<ul>
  <li>To get the logs of a pod, run the following command:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl logs <span class="nt">-f</span> &lt;pod-name&gt;
</code></pre></div>    </div>
  </li>
  <li>To get the logs of a pod in a specific container, run the following command:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl logs <span class="nt">-f</span> &lt;pod-name&gt; <span class="nt">-c</span> &lt;container-name&gt;
</code></pre></div>    </div>
  </li>
  <li>Describe a pod
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl describe pod &lt;pod-name&gt;
</code></pre></div>    </div>
  </li>
  <li>To get the details of a pod, run the following command:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get pod &lt;pod-name&gt; <span class="nt">-o</span> yaml
</code></pre></div>    </div>
  </li>
</ul>

<p><strong><a href="https://github.com/mahedee/code-sample02/tree/master/aks-hrm">Source code</a></strong></p>

        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3654930341568980"
     crossorigin="anonymous"></script>
<!-- Horizontal Unit -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3654930341568980"
     data-ad-slot="7189599032"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#aspnetcore" class="page__taxonomy-item" rel="tag">aspnetcore</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#azure" class="page__taxonomy-item" rel="tag">azure</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#devops" class="page__taxonomy-item" rel="tag">devops</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#docker" class="page__taxonomy-item" rel="tag">docker</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#kubernetes" class="page__taxonomy-item" rel="tag">kubernetes</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#microservices" class="page__taxonomy-item" rel="tag">microservices</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#sqlserver" class="page__taxonomy-item" rel="tag">sqlserver</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#asp-net-core" class="page__taxonomy-item" rel="tag">ASP.NET Core</a><span class="sep">, </span>
    
      
      
      <a href="/categories/#azure" class="page__taxonomy-item" rel="tag">Azure</a><span class="sep">, </span>
    
      
      
      <a href="/categories/#devops" class="page__taxonomy-item" rel="tag">DevOps</a><span class="sep">, </span>
    
      
      
      <a href="/categories/#docker" class="page__taxonomy-item" rel="tag">Docker</a><span class="sep">, </span>
    
      
      
      <a href="/categories/#kubernetes" class="page__taxonomy-item" rel="tag">Kubernetes</a><span class="sep">, </span>
    
      
      
      <a href="/categories/#microservices" class="page__taxonomy-item" rel="tag">Microservices</a><span class="sep">, </span>
    
      
      
      <a href="/categories/#sql-server" class="page__taxonomy-item" rel="tag">SQL Server</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2024-07-07T00:00:00-04:00">July 07, 2024</time></p>
        
      </footer>

      <section class="page__share">
  

  <a href="https://twitter.com/intent/tweet?text=Step-by-Step+Guide%3A+Deploying+an+ASP.NET+Core+Application+with+Azure+Kubernetes+Services%2C+Azure+SQL+Server%2C+and+Azure+Container+Registry%20https%3A%2F%2Fmahedee.net%2Fstep-by-step-guide-deploying-aspnet-core-application-with-aks-acr-sql%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fmahedee.net%2Fstep-by-step-guide-deploying-aspnet-core-application-with-aks-acr-sql%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fmahedee.net%2Fstep-by-step-guide-deploying-aspnet-core-application-with-aks-acr-sql%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/using_azure_functions_timer_trigger_for_seamless_cache_auto_refresh_in_real_world_applications/" class="pagination--pager" title="Using Azure Functions Timer Trigger for Seamless Cache Auto-Refresh in Real-World Applications
">Previous</a>
    
    
      <a href="/how-to-configure-ssl-and-https-for-rabbitmq-in-docker/" class="pagination--pager" title="How to Configure SSL and HTTPS for RabbitMQ in Docker
">Next</a>
    
  </nav>

    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">Comments</h4>
      <div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v18.0&appId=1641495303280571"></script>

<div class="fb-comments" 
     data-href="https://mahedee.net/step-by-step-guide-deploying-aspnet-core-application-with-aks-acr-sql/" 
     data-width="100%" 
     data-numposts="10"
     data-colorscheme="light"
     data-order-by="social"
     data-mobile="true">
</div>
    
</div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/implementing-metrics-and-dashboards-dotnet-core-api-prometheus-grafana/" rel="permalink">Implementing Metrics and Dashboards for .NET Core APIs with Prometheus and Grafana
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  18 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Step-by-step tutorial to implement metrics and dashboards for .NET Core APIs using Prometheus and Grafana for effective monitoring.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/Document_Management_System_with_ASP_NET_Core_and_Azure_Blob_Storage/" rel="permalink">Document Management System with ASP.NET Core and Azure Blob Storage: Complete Implementation Guide
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  5 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Learn how to build a robust Document Management System using ASP.NET Core Web API integrated with Azure Blob Storage. This comprehensive guide covers complet...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/build-java-projects-offline-maven-local-repository-windows/" rel="permalink">Build Java Projects Offline: A Practical Guide to Using Maven Local Repository on Windows
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  4 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Need to build Java projects without internet access? This guide walks through using Maven local repositories, manually installing JAR files, and building Jav...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/a_practical_guide_to_comparing_local_and_remote_git_changes/" rel="permalink">A Practical Guide to Comparing Local and Remote Git Changes
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  6 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Not sure what will be pushed to origin/main? This guide shows how to compare local and remote Git branches using VS Code and Git commands to avoid accidental...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>


      <ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3654930341568980"
     data-ad-slot="2244980843"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    <li><i class="fas fa-fw fa-award" aria-hidden="true"></i> <a href = "https://mvp.microsoft.com/en-us/PublicProfile/5001294">MVP Profile</a></li> 
    ||<li><i class="fas fa-fw fa-list-alt" aria-hidden="true"></i> <a href = "/categories/">Categories</a></li>
    ||<li><i class="fas fa-fw fa-code" aria-hidden="true"></i> <a href = "#">Programming</a></li>  
    ||<li><i class="fas fa-fw fa-globe" aria-hidden="true"></i> <a href = "/categories/#asp-net">ASP.NET</a></li> 
    ||<li><a href = "#">AI & ML</a></li>
    ||<li><a href = "#">Javascript</a></li>
    ||<li><a href = "#">Software Architecture</a></li>
    ||<li><a href = "#">Database</a></li>
    ||<li><a href = "#">OOP</a></li>
    ||<li><a href = "#">Design Pattern</a></li>  
    ||<li><a href = "#">Algorithm</a></li>
    ||<li><a href = "#">Interview Tips</a></li>
    ||<li><a href = "#">Opinions</a></li>
    ||<li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 Mahedee Hasan. 
  <!-- Powered by  -->
  <!-- <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>. -->
</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '', { 'anonymize_ip': false});
</script>











        <!-- Add sense code for all page : added globaly -->
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3654930341568980"
        crossorigin="anonymous"></script>

  </body>
</html>
