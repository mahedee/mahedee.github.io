<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.6 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Developing and Testing a Multi-Environment ASP.NET Core Application with SQL Server - Think Simple</title>
<meta name="description" content="In enterprise applications, we need to continuously switch between different environments for testing and running applications. In this article, I will show you how to create an application and configure it for testing in different environments like Dev, QA, and Prod without conflicts between environments. This is an ASP.NET Core Web API application using SQL Server with automated API testing.">


  <meta name="author" content="Mahedee Hasan">


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Think Simple">
<meta property="og:title" content="Developing and Testing a Multi-Environment ASP.NET Core Application with SQL Server">
<meta property="og:url" content="https://mahedee.net/Developing-and-Testing-a-Multi-Environment-ASP-NET-Core-Application-with-SQL-Server/">


  <meta property="og:description" content="In enterprise applications, we need to continuously switch between different environments for testing and running applications. In this article, I will show you how to create an application and configure it for testing in different environments like Dev, QA, and Prod without conflicts between environments. This is an ASP.NET Core Web API application using SQL Server with automated API testing.">







  <meta property="article:published_time" content="2025-06-08T00:00:00-04:00">





  

  


<link rel="canonical" href="https://mahedee.net/Developing-and-Testing-a-Multi-Environment-ASP-NET-Core-Application-with-SQL-Server/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Mahedee Hasan",
      "url": "https://mahedee.net/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Think Simple Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



<!-- SEO tags -->
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Developing and Testing a Multi-Environment ASP.NET Core Application with SQL Server | Think Simple</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Developing and Testing a Multi-Environment ASP.NET Core Application with SQL Server" />
<meta name="author" content="Mahedee Hasan" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="In enterprise applications, we need to continuously switch between different environments for testing and running applications. In this article, I will show you how to create an application and configure it for testing in different environments like Dev, QA, and Prod without conflicts between environments. This is an ASP.NET Core Web API application using SQL Server with automated API testing." />
<meta property="og:description" content="In enterprise applications, we need to continuously switch between different environments for testing and running applications. In this article, I will show you how to create an application and configure it for testing in different environments like Dev, QA, and Prod without conflicts between environments. This is an ASP.NET Core Web API application using SQL Server with automated API testing." />
<link rel="canonical" href="https://mahedee.net/Developing-and-Testing-a-Multi-Environment-ASP-NET-Core-Application-with-SQL-Server/" />
<meta property="og:url" content="https://mahedee.net/Developing-and-Testing-a-Multi-Environment-ASP-NET-Core-Application-with-SQL-Server/" />
<meta property="og:site_name" content="Think Simple" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-06-08T00:00:00-04:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Developing and Testing a Multi-Environment ASP.NET Core Application with SQL Server" />
<meta name="twitter:site" content="@" />
<meta name="twitter:creator" content="@Mahedee Hasan" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Mahedee Hasan"},"dateModified":"2025-06-08T00:00:00-04:00","datePublished":"2025-06-08T00:00:00-04:00","description":"In enterprise applications, we need to continuously switch between different environments for testing and running applications. In this article, I will show you how to create an application and configure it for testing in different environments like Dev, QA, and Prod without conflicts between environments. This is an ASP.NET Core Web API application using SQL Server with automated API testing.","headline":"Developing and Testing a Multi-Environment ASP.NET Core Application with SQL Server","mainEntityOfPage":{"@type":"WebPage","@id":"https://mahedee.net/Developing-and-Testing-a-Multi-Environment-ASP-NET-Core-Application-with-SQL-Server/"},"url":"https://mahedee.net/Developing-and-Testing-a-Multi-Environment-ASP-NET-Core-Application-with-SQL-Server/"}</script>
<!-- End Jekyll SEO tag -->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->



     
  </head>

  <body class="layout--single wide">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Think Simple
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/" >Home</a>
            </li><li class="masthead__menu-item">
              <a href="/categories" >Categories</a>
            </li><li class="masthead__menu-item">
              <a href="/about/" >About</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="/assets/images/me.jpg" alt="Mahedee Hasan" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Mahedee Hasan</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>I am a Microsoft MVP (11th times), programmer, software developer, software architect, consultant, author, researcher, technical blogger, technical speaker, trainer and learner. I have more than 17 years experience in the field of software design and development.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Toronto, Ontario, Canada</span>
        </li>
      

      
        
          
            <li><a href="mailto:mahedee.hasan@gmail.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
          
        
          
            <li><a href="https://mahedee.net" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> Website</a></li>
          
        
          
            <li><a href="https://mvp.microsoft.com/en-us/PublicProfile/5001294" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-award" aria-hidden="true"></i> MVP</a></li>
          
        
          
            <li><a href="https://www.linkedin.com/in/mahedee/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li>
          
        
          
            <li><a href="https://twitter.com/mahedeehasan" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
          
        
          
            <li><a href="https://facebook.com/mahedee19" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i> Facebook</a></li>
          
        
          
            <li><a href="https://github.com/mahedee" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
          
        
          
            <li><a href="https://www.buymeacoffee.com/mahedee" rel="nofollow noopener noreferrer"><i class="fab fa fa-coffee" aria-hidden="true"></i> Buy me a Coffee</a></li>
          
        
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Developing and Testing a Multi-Environment ASP.NET Core Application with SQL Server">
    <meta itemprop="description" content="In enterprise applications, we need to continuously switch between different environments for testing and running applications. In this article, I will show you how to create an application and configure it for testing in different environments like Dev, QA, and Prod without conflicts between environments. This is an ASP.NET Core Web API application using SQL Server with automated API testing.">
    <meta itemprop="datePublished" content="June 08, 2025">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Developing and Testing a Multi-Environment ASP.NET Core Application with SQL Server
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  24 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p><strong>Introduction</strong></p>

<p>Running the same code across environments demands clear configuration boundaries, safe database migrations, and repeatable tests. In this comprehensive step-by-step guide, you’ll develop and configure an ASP.NET Core Web API project from scratch to work consistently in Development, QA, and Production using ASP.NET Core, EF Core, and SQL Server. At the end of this guide, you’ll have a production-ready HRM (Human Resource Management) API with automated testing workflows for multiple environments.</p>

<p><strong>Why it is important?</strong></p>
<ul>
  <li>Environment parity reduces “works on my machine” issues.</li>
  <li>Safer deployments with gated migrations and smoke tests.</li>
  <li>Clean separation of secrets and settings for Dev/QA/Prod.</li>
  <li>Faster troubleshooting with predictable diagnostics and seed data.</li>
  <li>Production-ready architecture with proper testing infrastructure.</li>
</ul>

<p><strong>Tools and Technology Used</strong></p>
<ul>
  <li>.NET 9 SDK</li>
  <li>ASP.NET Core Web API</li>
  <li>C#</li>
  <li>Entity Framework Core 9 (SQL Server)</li>
  <li>SQL Server (LocalDB, Express, or full version)</li>
  <li>xUnit (testing framework)</li>
  <li>PowerShell (automation scripts)</li>
  <li>Visual Studio 2022 or VS Code</li>
</ul>

<p><strong>Implementation:</strong></p>

<p><strong>Step 1: Prepare Development Environment</strong></p>

<p><strong>Option A — Local SQL Server Installation:</strong>
Install SQL Server, or use LocalDB. Ensure SQL Server is accessible with your credentials.</p>

<p><strong>Option B — Docker SQL Server (Windows PowerShell):</strong>
If you don’t have SQL Server installed, use Docker to run a SQL Server container:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Pull and run SQL Server 2022 in Docker</span><span class="w">
</span><span class="n">docker</span><span class="w"> </span><span class="nx">pull</span><span class="w"> </span><span class="nx">mcr.microsoft.com/mssql/server:2022-latest</span><span class="w">
</span><span class="n">docker</span><span class="w"> </span><span class="nx">run</span><span class="w"> </span><span class="nt">-e</span><span class="w"> </span><span class="s2">"ACCEPT_EULA=Y"</span><span class="w"> </span><span class="nt">-e</span><span class="w"> </span><span class="s2">"SA_PASSWORD=YourPassword123!"</span><span class="w"> </span><span class="nt">-p</span><span class="w"> </span><span class="nx">1433:1433</span><span class="w"> </span><span class="nt">--name</span><span class="w"> </span><span class="nx">sql2022</span><span class="w"> </span><span class="nt">-d</span><span class="w"> </span><span class="nx">mcr.microsoft.com/mssql/server:2022-latest</span><span class="w">

</span><span class="c"># Verify connection</span><span class="w">
</span><span class="n">sqlcmd</span><span class="w"> </span><span class="nt">-S</span><span class="w"> </span><span class="nx">localhost</span><span class="w"> </span><span class="nt">-U</span><span class="w"> </span><span class="nx">sa</span><span class="w"> </span><span class="nt">-P</span><span class="w"> </span><span class="s2">"YourPassword123!"</span><span class="w"> </span><span class="nt">-Q</span><span class="w"> </span><span class="s2">"SELECT @@VERSION"</span><span class="w">
</span></code></pre></div></div>

<p><strong>Verify Prerequisites:</strong></p>
<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check .NET 9 SDK</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nt">--version</span><span class="w">
</span><span class="c"># Expected: 9.0.x</span><span class="w">

</span><span class="c"># Test SQL Server connection</span><span class="w">
</span><span class="n">sqlcmd</span><span class="w"> </span><span class="nt">-S</span><span class="w"> </span><span class="nx">localhost</span><span class="w"> </span><span class="nt">-E</span><span class="w"> </span><span class="nt">-Q</span><span class="w"> </span><span class="s2">"SELECT @@VERSION"</span><span class="w">

</span><span class="c"># Check PowerShell version</span><span class="w">
</span><span class="bp">$PSVersionTable</span><span class="o">.</span><span class="nf">PSVersion</span><span class="w">
</span></code></pre></div></div>

<p><strong>Step 2: Create Project Structure from Scratch</strong></p>

<ul>
  <li>Create the solution and project structure using the following commands:</li>
</ul>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create solution structure</span><span class="w">
</span><span class="n">mkdir</span><span class="w"> </span><span class="nx">multi-env-app</span><span class="w">
</span><span class="n">cd</span><span class="w"> </span><span class="nx">multi-env-app</span><span class="w">
</span><span class="n">mkdir</span><span class="w"> </span><span class="nx">src</span><span class="p">,</span><span class="w"> </span><span class="nx">doc</span><span class="w">
</span><span class="n">cd</span><span class="w"> </span><span class="nx">src</span><span class="w">
</span><span class="n">mkdir</span><span class="w"> </span><span class="nx">HRM</span><span class="w">
</span><span class="n">cd</span><span class="w"> </span><span class="nx">HRM</span><span class="w">

</span><span class="c"># Create solution and Web API project</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">new</span><span class="w"> </span><span class="nx">sln</span><span class="w"> </span><span class="nt">-n</span><span class="w"> </span><span class="nx">HRM</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">new</span><span class="w"> </span><span class="nx">webapi</span><span class="w"> </span><span class="nt">-n</span><span class="w"> </span><span class="nx">HRM.API</span><span class="w"> </span><span class="nt">--framework</span><span class="w"> </span><span class="nx">net9.0</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">sln</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="nx">HRM.API/HRM.API.csproj</span><span class="w">

</span><span class="c"># Navigate to API project and install packages</span><span class="w">
</span><span class="n">cd</span><span class="w"> </span><span class="nx">HRM.API</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="nx">package</span><span class="w"> </span><span class="nx">Microsoft.EntityFrameworkCore.SqlServer</span><span class="w"> </span><span class="nt">--version</span><span class="w"> </span><span class="nx">9.0.0</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="nx">package</span><span class="w"> </span><span class="nx">Microsoft.EntityFrameworkCore.Tools</span><span class="w"> </span><span class="nt">--version</span><span class="w"> </span><span class="nx">9.0.0</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="nx">package</span><span class="w"> </span><span class="nx">Microsoft.EntityFrameworkCore.Design</span><span class="w"> </span><span class="nt">--version</span><span class="w"> </span><span class="nx">9.0.0</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="nx">package</span><span class="w"> </span><span class="nx">Microsoft.AspNetCore.OpenApi</span><span class="w"> </span><span class="nt">--version</span><span class="w"> </span><span class="nx">9.0.0</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="nx">package</span><span class="w"> </span><span class="nx">Swashbuckle.AspNetCore</span><span class="w"> </span><span class="nt">--version</span><span class="w"> </span><span class="nx">6.8.1</span><span class="w">

</span><span class="c"># Create project folders</span><span class="w">
</span><span class="n">mkdir</span><span class="w"> </span><span class="nx">Controllers</span><span class="p">,</span><span class="w"> </span><span class="nx">Models</span><span class="p">,</span><span class="w"> </span><span class="nx">DTOs</span><span class="p">,</span><span class="w"> </span><span class="nx">Services</span><span class="p">,</span><span class="w"> </span><span class="nx">Data</span><span class="p">,</span><span class="w"> </span><span class="nx">Migrations</span><span class="w">
</span></code></pre></div></div>

<ul>
  <li>You can use visual studio to create the solution and project structure if you prefer a GUI.</li>
</ul>

<p><strong>Project Structure Overview:</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HRM/
├── HRM.sln                     # Solution file
├── HRM.API/                    # Main Web API project
│   ├── Controllers/            # API endpoints (DepartmentsController, EmployeesController)
│   ├── Services/              # Business logic services and interfaces
│   ├── Data/                  # Entity Framework DbContext
│   ├── Models/                # Entity models (Department, Employee)
│   ├── DTOs/                  # Data transfer objects with validation
│   ├── Migrations/            # EF Core database migrations
│   ├── Properties/            # Launch settings with multiple profiles
│   ├── appsettings.json       # Production configuration (base settings)
│   ├── appsettings.Development.json # Development environment settings
│   ├── appsettings.QA.json    # QA environment settings
│   ├── Program.cs             # Application entry point
│   └── HRM.API.csproj         # Project file with dependencies
└── HRM.Tests/                 # Test project (created later)
</code></pre></div></div>

<p><strong>Step 3: Create Data Models and Database Context</strong></p>

<p><strong>Create Entity Models:</strong></p>

<p>Create <code class="language-plaintext highlighter-rouge">Models/Department.cs</code>:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">System.ComponentModel.DataAnnotations</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">HRM.API.Models</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Department</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">int</span> <span class="n">DepartmentId</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="p">[</span><span class="n">Required</span><span class="p">]</span>
        <span class="p">[</span><span class="nf">StringLength</span><span class="p">(</span><span class="m">100</span><span class="p">)]</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">Name</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="kt">string</span><span class="p">.</span><span class="n">Empty</span><span class="p">;</span>

        <span class="p">[</span><span class="nf">StringLength</span><span class="p">(</span><span class="m">500</span><span class="p">)]</span>
        <span class="k">public</span> <span class="kt">string</span><span class="p">?</span> <span class="n">Description</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">public</span> <span class="kt">bool</span> <span class="n">IsActive</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>

        <span class="k">public</span> <span class="n">DateTime</span> <span class="n">CreatedDate</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span><span class="p">;</span>

        <span class="k">public</span> <span class="n">DateTime</span><span class="p">?</span> <span class="n">UpdatedDate</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="c1">// Navigation property</span>
        <span class="k">public</span> <span class="k">virtual</span> <span class="n">ICollection</span><span class="p">&lt;</span><span class="n">Employee</span><span class="p">&gt;</span> <span class="n">Employees</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Employee</span><span class="p">&gt;();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Create <code class="language-plaintext highlighter-rouge">Models/Employee.cs</code>:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">System.ComponentModel.DataAnnotations</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.ComponentModel.DataAnnotations.Schema</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">HRM.API.Models</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Employee</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">int</span> <span class="n">EmployeeId</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="p">[</span><span class="n">Required</span><span class="p">]</span>
        <span class="p">[</span><span class="nf">StringLength</span><span class="p">(</span><span class="m">100</span><span class="p">)]</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">FirstName</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="kt">string</span><span class="p">.</span><span class="n">Empty</span><span class="p">;</span>

        <span class="p">[</span><span class="n">Required</span><span class="p">]</span>
        <span class="p">[</span><span class="nf">StringLength</span><span class="p">(</span><span class="m">100</span><span class="p">)]</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">LastName</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="kt">string</span><span class="p">.</span><span class="n">Empty</span><span class="p">;</span>

        <span class="p">[</span><span class="n">Required</span><span class="p">]</span>
        <span class="p">[</span><span class="n">EmailAddress</span><span class="p">]</span>
        <span class="p">[</span><span class="nf">StringLength</span><span class="p">(</span><span class="m">255</span><span class="p">)]</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">Email</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="kt">string</span><span class="p">.</span><span class="n">Empty</span><span class="p">;</span>

        <span class="p">[</span><span class="nf">StringLength</span><span class="p">(</span><span class="m">20</span><span class="p">)]</span>
        <span class="k">public</span> <span class="kt">string</span><span class="p">?</span> <span class="n">PhoneNumber</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="p">[</span><span class="n">Required</span><span class="p">]</span>
        <span class="k">public</span> <span class="n">DateTime</span> <span class="n">HireDate</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="p">[</span><span class="n">Required</span><span class="p">]</span>
        <span class="p">[</span><span class="nf">Column</span><span class="p">(</span><span class="n">TypeName</span> <span class="p">=</span> <span class="s">"decimal(10,2)"</span><span class="p">)]</span>
        <span class="k">public</span> <span class="kt">decimal</span> <span class="n">Salary</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="p">[</span><span class="n">Required</span><span class="p">]</span>
        <span class="k">public</span> <span class="kt">int</span> <span class="n">DepartmentId</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">public</span> <span class="n">DateTime</span> <span class="n">CreatedDate</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span><span class="p">;</span>

        <span class="k">public</span> <span class="n">DateTime</span><span class="p">?</span> <span class="n">UpdatedDate</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="c1">// Navigation property</span>
        <span class="k">public</span> <span class="k">virtual</span> <span class="n">Department</span> <span class="n">Department</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="k">null</span><span class="p">!;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Create Database Context with Seed Data:</strong></p>

<p>Create <code class="language-plaintext highlighter-rouge">Data/HrmDbContext.cs</code>:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">Microsoft.EntityFrameworkCore</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">HRM.API.Models</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">HRM.API.Data</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">HrmDbContext</span> <span class="p">:</span> <span class="n">DbContext</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="nf">HrmDbContext</span><span class="p">(</span><span class="n">DbContextOptions</span><span class="p">&lt;</span><span class="n">HrmDbContext</span><span class="p">&gt;</span> <span class="n">options</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
        <span class="p">{</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="n">DbSet</span><span class="p">&lt;</span><span class="n">Employee</span><span class="p">&gt;</span> <span class="n">Employees</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="n">DbSet</span><span class="p">&lt;</span><span class="n">Department</span><span class="p">&gt;</span> <span class="n">Departments</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnModelCreating</span><span class="p">(</span><span class="n">ModelBuilder</span> <span class="n">modelBuilder</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">base</span><span class="p">.</span><span class="nf">OnModelCreating</span><span class="p">(</span><span class="n">modelBuilder</span><span class="p">);</span>

            <span class="c1">// Configure relationships</span>
            <span class="n">modelBuilder</span><span class="p">.</span><span class="n">Entity</span><span class="p">&lt;</span><span class="n">Employee</span><span class="p">&gt;()</span>
                <span class="p">.</span><span class="nf">HasOne</span><span class="p">(</span><span class="n">e</span> <span class="p">=&gt;</span> <span class="n">e</span><span class="p">.</span><span class="n">Department</span><span class="p">)</span>
                <span class="p">.</span><span class="nf">WithMany</span><span class="p">(</span><span class="n">d</span> <span class="p">=&gt;</span> <span class="n">d</span><span class="p">.</span><span class="n">Employees</span><span class="p">)</span>
                <span class="p">.</span><span class="nf">HasForeignKey</span><span class="p">(</span><span class="n">e</span> <span class="p">=&gt;</span> <span class="n">e</span><span class="p">.</span><span class="n">DepartmentId</span><span class="p">)</span>
                <span class="p">.</span><span class="nf">OnDelete</span><span class="p">(</span><span class="n">DeleteBehavior</span><span class="p">.</span><span class="n">Restrict</span><span class="p">);</span>

            <span class="c1">// Configure unique constraints</span>
            <span class="n">modelBuilder</span><span class="p">.</span><span class="n">Entity</span><span class="p">&lt;</span><span class="n">Employee</span><span class="p">&gt;()</span>
                <span class="p">.</span><span class="nf">HasIndex</span><span class="p">(</span><span class="n">e</span> <span class="p">=&gt;</span> <span class="n">e</span><span class="p">.</span><span class="n">Email</span><span class="p">)</span>
                <span class="p">.</span><span class="nf">IsUnique</span><span class="p">();</span>

            <span class="n">modelBuilder</span><span class="p">.</span><span class="n">Entity</span><span class="p">&lt;</span><span class="n">Department</span><span class="p">&gt;()</span>
                <span class="p">.</span><span class="nf">HasIndex</span><span class="p">(</span><span class="n">d</span> <span class="p">=&gt;</span> <span class="n">d</span><span class="p">.</span><span class="n">Name</span><span class="p">)</span>
                <span class="p">.</span><span class="nf">IsUnique</span><span class="p">();</span>

            <span class="c1">// Seed sample data for testing</span>
            <span class="nf">SeedData</span><span class="p">(</span><span class="n">modelBuilder</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">SeedData</span><span class="p">(</span><span class="n">ModelBuilder</span> <span class="n">modelBuilder</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// Seed Departments</span>
            <span class="n">modelBuilder</span><span class="p">.</span><span class="n">Entity</span><span class="p">&lt;</span><span class="n">Department</span><span class="p">&gt;().</span><span class="nf">HasData</span><span class="p">(</span>
                <span class="k">new</span> <span class="n">Department</span> <span class="p">{</span> <span class="n">DepartmentId</span> <span class="p">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">Name</span> <span class="p">=</span> <span class="s">"Human Resources"</span><span class="p">,</span> <span class="n">Description</span> <span class="p">=</span> <span class="s">"Manages employee relations, recruitment, and benefits"</span><span class="p">,</span> <span class="n">IsActive</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="n">CreatedDate</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">2024</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">DateTimeKind</span><span class="p">.</span><span class="n">Utc</span><span class="p">)</span> <span class="p">},</span>
                <span class="k">new</span> <span class="n">Department</span> <span class="p">{</span> <span class="n">DepartmentId</span> <span class="p">=</span> <span class="m">2</span><span class="p">,</span> <span class="n">Name</span> <span class="p">=</span> <span class="s">"Information Technology"</span><span class="p">,</span> <span class="n">Description</span> <span class="p">=</span> <span class="s">"Handles all technology infrastructure and software development"</span><span class="p">,</span> <span class="n">IsActive</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="n">CreatedDate</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">2024</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">DateTimeKind</span><span class="p">.</span><span class="n">Utc</span><span class="p">)</span> <span class="p">},</span>
                <span class="k">new</span> <span class="n">Department</span> <span class="p">{</span> <span class="n">DepartmentId</span> <span class="p">=</span> <span class="m">3</span><span class="p">,</span> <span class="n">Name</span> <span class="p">=</span> <span class="s">"Finance"</span><span class="p">,</span> <span class="n">Description</span> <span class="p">=</span> <span class="s">"Manages company finances, budgeting, and accounting"</span><span class="p">,</span> <span class="n">IsActive</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="n">CreatedDate</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">2024</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">DateTimeKind</span><span class="p">.</span><span class="n">Utc</span><span class="p">)</span> <span class="p">},</span>
                <span class="k">new</span> <span class="n">Department</span> <span class="p">{</span> <span class="n">DepartmentId</span> <span class="p">=</span> <span class="m">4</span><span class="p">,</span> <span class="n">Name</span> <span class="p">=</span> <span class="s">"Marketing"</span><span class="p">,</span> <span class="n">Description</span> <span class="p">=</span> <span class="s">"Handles marketing campaigns, branding, and customer outreach"</span><span class="p">,</span> <span class="n">IsActive</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="n">CreatedDate</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">2024</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">DateTimeKind</span><span class="p">.</span><span class="n">Utc</span><span class="p">)</span> <span class="p">},</span>
                <span class="k">new</span> <span class="n">Department</span> <span class="p">{</span> <span class="n">DepartmentId</span> <span class="p">=</span> <span class="m">5</span><span class="p">,</span> <span class="n">Name</span> <span class="p">=</span> <span class="s">"Sales"</span><span class="p">,</span> <span class="n">Description</span> <span class="p">=</span> <span class="s">"Manages customer relationships and sales processes"</span><span class="p">,</span> <span class="n">IsActive</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="n">CreatedDate</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">2024</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">DateTimeKind</span><span class="p">.</span><span class="n">Utc</span><span class="p">)</span> <span class="p">}</span>
            <span class="p">);</span>

            <span class="c1">// Seed Employees</span>
            <span class="n">modelBuilder</span><span class="p">.</span><span class="n">Entity</span><span class="p">&lt;</span><span class="n">Employee</span><span class="p">&gt;().</span><span class="nf">HasData</span><span class="p">(</span>
                <span class="k">new</span> <span class="n">Employee</span> <span class="p">{</span> <span class="n">EmployeeId</span> <span class="p">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">FirstName</span> <span class="p">=</span> <span class="s">"Sarah"</span><span class="p">,</span> <span class="n">LastName</span> <span class="p">=</span> <span class="s">"Johnson"</span><span class="p">,</span> <span class="n">Email</span> <span class="p">=</span> <span class="s">"sarah.johnson@company.com"</span><span class="p">,</span> <span class="n">PhoneNumber</span> <span class="p">=</span> <span class="s">"+1-555-0101"</span><span class="p">,</span> <span class="n">HireDate</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">2023</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">15</span><span class="p">),</span> <span class="n">Salary</span> <span class="p">=</span> <span class="m">75000m</span><span class="p">,</span> <span class="n">DepartmentId</span> <span class="p">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">CreatedDate</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">2024</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">DateTimeKind</span><span class="p">.</span><span class="n">Utc</span><span class="p">)</span> <span class="p">},</span>
                <span class="k">new</span> <span class="n">Employee</span> <span class="p">{</span> <span class="n">EmployeeId</span> <span class="p">=</span> <span class="m">2</span><span class="p">,</span> <span class="n">FirstName</span> <span class="p">=</span> <span class="s">"Michael"</span><span class="p">,</span> <span class="n">LastName</span> <span class="p">=</span> <span class="s">"Chen"</span><span class="p">,</span> <span class="n">Email</span> <span class="p">=</span> <span class="s">"michael.chen@company.com"</span><span class="p">,</span> <span class="n">PhoneNumber</span> <span class="p">=</span> <span class="s">"+1-555-0102"</span><span class="p">,</span> <span class="n">HireDate</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">2022</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">22</span><span class="p">),</span> <span class="n">Salary</span> <span class="p">=</span> <span class="m">95000m</span><span class="p">,</span> <span class="n">DepartmentId</span> <span class="p">=</span> <span class="m">2</span><span class="p">,</span> <span class="n">CreatedDate</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">2024</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">DateTimeKind</span><span class="p">.</span><span class="n">Utc</span><span class="p">)</span> <span class="p">},</span>
                <span class="k">new</span> <span class="n">Employee</span> <span class="p">{</span> <span class="n">EmployeeId</span> <span class="p">=</span> <span class="m">3</span><span class="p">,</span> <span class="n">FirstName</span> <span class="p">=</span> <span class="s">"Emily"</span><span class="p">,</span> <span class="n">LastName</span> <span class="p">=</span> <span class="s">"Davis"</span><span class="p">,</span> <span class="n">Email</span> <span class="p">=</span> <span class="s">"emily.davis@company.com"</span><span class="p">,</span> <span class="n">PhoneNumber</span> <span class="p">=</span> <span class="s">"+1-555-0103"</span><span class="p">,</span> <span class="n">HireDate</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">2023</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">10</span><span class="p">),</span> <span class="n">Salary</span> <span class="p">=</span> <span class="m">82000m</span><span class="p">,</span> <span class="n">DepartmentId</span> <span class="p">=</span> <span class="m">3</span><span class="p">,</span> <span class="n">CreatedDate</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">2024</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">DateTimeKind</span><span class="p">.</span><span class="n">Utc</span><span class="p">)</span> <span class="p">}</span>
            <span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Step 4: Configure Multi-Environment Settings</strong></p>

<p>ASP.NET Core loads <code class="language-plaintext highlighter-rouge">appsettings.json</code> plus <code class="language-plaintext highlighter-rouge">appsettings.{Environment}.json</code>. Create environment-specific configuration files:</p>

<p><strong>Create <code class="language-plaintext highlighter-rouge">appsettings.json</code> (Production base):</strong></p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"ConnectionStrings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"DefaultConnection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Server=prod-server;Database=HRM_Prod;User Id=hrm_user;Password=secure_prod_password;TrustServerCertificate=true;Encrypt=true;"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"Logging"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"LogLevel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"Default"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Information"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Microsoft.AspNetCore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Warning"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Microsoft.EntityFrameworkCore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Warning"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"AllowedHosts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ApiSettings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"Version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HRM API - Production"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"EnableSwagger"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"EnableDetailedErrors"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><strong>Create <code class="language-plaintext highlighter-rouge">appsettings.Development.json</code>:</strong></p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"ConnectionStrings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"DefaultConnection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Server=localhost;Database=HRM_DEV;User Id=sa;Password=YourPassword123!;TrustServerCertificate=true;"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"Logging"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"LogLevel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"Default"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Debug"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Microsoft.AspNetCore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Information"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Microsoft.EntityFrameworkCore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Information"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Microsoft.EntityFrameworkCore.Database.Command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Information"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"ApiSettings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"Version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HRM API - Development"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"EnableSwagger"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"EnableDetailedErrors"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><strong>Create <code class="language-plaintext highlighter-rouge">appsettings.QA.json</code>:</strong></p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"ConnectionStrings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"DefaultConnection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Server=localhost;Database=HRM_QA;User Id=sa;Password=YourPassword123!;TrustServerCertificate=true;"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"Logging"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"LogLevel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"Default"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Information"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Microsoft.AspNetCore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Information"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Microsoft.EntityFrameworkCore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Information"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"ApiSettings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"Version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HRM API - QA Environment"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"EnableSwagger"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"EnableDetailedErrors"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><strong>Configure Multiple Launch Profiles:</strong></p>

<p>Update <code class="language-plaintext highlighter-rouge">Properties/launchSettings.json</code>:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"profiles"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"development"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"commandName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Project"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"applicationUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://localhost:7285;http://localhost:5152"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"launchBrowser"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"launchUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"swagger"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"environmentVariables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"ASPNETCORE_ENVIRONMENT"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Development"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"qa"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"commandName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Project"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"applicationUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://localhost:7286;http://localhost:5153"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"launchBrowser"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"launchUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"swagger"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"environmentVariables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"ASPNETCORE_ENVIRONMENT"</span><span class="p">:</span><span class="w"> </span><span class="s2">"QA"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"production"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"commandName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Project"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"applicationUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://localhost:7287;http://localhost:5154"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"launchBrowser"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"environmentVariables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"ASPNETCORE_ENVIRONMENT"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Production"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><strong>Set environment when running:</strong></p>
<ul>
  <li>Run the following command in PowerShell to set the environment variable:
    <div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">ASPNETCORE_ENVIRONMENT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Development"</span><span class="w">   </span><span class="c"># or "QA", "Production"</span><span class="w">
</span></code></pre></div>    </div>
  </li>
</ul>

<p><strong>Step 5: Create Business Logic Services</strong></p>

<p><strong>Create service interfaces and implementations (key files):</strong></p>

<p>Create <code class="language-plaintext highlighter-rouge">Services/IDepartmentService.cs</code>:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">HRM.API.DTOs</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">HRM.API.Services</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">interface</span> <span class="nc">IDepartmentService</span>
    <span class="p">{</span>
        <span class="n">Task</span><span class="p">&lt;</span><span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">DepartmentDto</span><span class="p">&gt;&gt;</span> <span class="nf">GetAllDepartmentsAsync</span><span class="p">();</span>
        <span class="n">Task</span><span class="p">&lt;</span><span class="n">DepartmentDto</span><span class="p">?&gt;</span> <span class="nf">GetDepartmentByIdAsync</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">);</span>
        <span class="n">Task</span><span class="p">&lt;</span><span class="n">DepartmentDto</span><span class="p">&gt;</span> <span class="nf">CreateDepartmentAsync</span><span class="p">(</span><span class="n">CreateDepartmentDto</span> <span class="n">createDepartmentDto</span><span class="p">);</span>
        <span class="n">Task</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span> <span class="nf">DeleteDepartmentAsync</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">);</span>
        <span class="n">Task</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span> <span class="nf">DepartmentExistsAsync</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Create <code class="language-plaintext highlighter-rouge">Services/DepartmentService.cs</code> (implementing business logic with EF Core operations).</p>

<p><strong>Step 6: Create API Controllers</strong></p>

<p>Create <code class="language-plaintext highlighter-rouge">Controllers/DepartmentsController.cs</code>:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">Microsoft.AspNetCore.Mvc</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">HRM.API.DTOs</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">HRM.API.Services</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">HRM.API.Controllers</span>
<span class="p">{</span>
    <span class="p">[</span><span class="n">ApiController</span><span class="p">]</span>
    <span class="p">[</span><span class="nf">Route</span><span class="p">(</span><span class="s">"api/[controller]"</span><span class="p">)]</span>
    <span class="p">[</span><span class="nf">Produces</span><span class="p">(</span><span class="s">"application/json"</span><span class="p">)]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">DepartmentsController</span> <span class="p">:</span> <span class="n">ControllerBase</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="k">readonly</span> <span class="n">IDepartmentService</span> <span class="n">_departmentService</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">DepartmentsController</span><span class="p">(</span><span class="n">IDepartmentService</span> <span class="n">departmentService</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">_departmentService</span> <span class="p">=</span> <span class="n">departmentService</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">HttpGet</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="n">ActionResult</span><span class="p">&lt;</span><span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">DepartmentDto</span><span class="p">&gt;&gt;&gt;</span> <span class="nf">GetDepartments</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">departments</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_departmentService</span><span class="p">.</span><span class="nf">GetAllDepartmentsAsync</span><span class="p">();</span>
            <span class="k">return</span> <span class="nf">Ok</span><span class="p">(</span><span class="n">departments</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="nf">HttpGet</span><span class="p">(</span><span class="s">"{id}"</span><span class="p">)]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="n">ActionResult</span><span class="p">&lt;</span><span class="n">DepartmentDto</span><span class="p">&gt;&gt;</span> <span class="nf">GetDepartment</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">department</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_departmentService</span><span class="p">.</span><span class="nf">GetDepartmentByIdAsync</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">department</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
                <span class="k">return</span> <span class="nf">NotFound</span><span class="p">(</span><span class="s">$"Department with ID </span><span class="p">{</span><span class="n">id</span><span class="p">}</span><span class="s"> not found."</span><span class="p">);</span>

            <span class="k">return</span> <span class="nf">Ok</span><span class="p">(</span><span class="n">department</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">HttpPost</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="n">ActionResult</span><span class="p">&lt;</span><span class="n">DepartmentDto</span><span class="p">&gt;&gt;</span> <span class="nf">CreateDepartment</span><span class="p">(</span><span class="n">CreateDepartmentDto</span> <span class="n">createDepartmentDto</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(!</span><span class="n">ModelState</span><span class="p">.</span><span class="n">IsValid</span><span class="p">)</span>
                <span class="k">return</span> <span class="nf">BadRequest</span><span class="p">(</span><span class="n">ModelState</span><span class="p">);</span>

            <span class="kt">var</span> <span class="n">department</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_departmentService</span><span class="p">.</span><span class="nf">CreateDepartmentAsync</span><span class="p">(</span><span class="n">createDepartmentDto</span><span class="p">);</span>
            <span class="k">return</span> <span class="nf">CreatedAtAction</span><span class="p">(</span><span class="k">nameof</span><span class="p">(</span><span class="n">GetDepartment</span><span class="p">),</span> <span class="k">new</span> <span class="p">{</span> <span class="n">id</span> <span class="p">=</span> <span class="n">department</span><span class="p">.</span><span class="n">DepartmentId</span> <span class="p">},</span> <span class="n">department</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="nf">HttpDelete</span><span class="p">(</span><span class="s">"{id}"</span><span class="p">)]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="n">IActionResult</span><span class="p">&gt;</span> <span class="nf">DeleteDepartment</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">result</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_departmentService</span><span class="p">.</span><span class="nf">DeleteDepartmentAsync</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(!</span><span class="n">result</span><span class="p">)</span>
                <span class="k">return</span> <span class="nf">NotFound</span><span class="p">(</span><span class="s">$"Department with ID </span><span class="p">{</span><span class="n">id</span><span class="p">}</span><span class="s"> not found."</span><span class="p">);</span>

            <span class="k">return</span> <span class="nf">NoContent</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Step 7: Configure Program.cs for Multi-Environment Support</strong></p>

<p>Update <code class="language-plaintext highlighter-rouge">Program.cs</code>:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">Microsoft.EntityFrameworkCore</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">HRM.API.Data</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">HRM.API.Services</span><span class="p">;</span>

<span class="kt">var</span> <span class="n">builder</span> <span class="p">=</span> <span class="n">WebApplication</span><span class="p">.</span><span class="nf">CreateBuilder</span><span class="p">(</span><span class="n">args</span><span class="p">);</span>

<span class="c1">// Add services to the container</span>
<span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="nf">AddControllers</span><span class="p">();</span>

<span class="c1">// Configure Entity Framework with environment-specific connection string</span>
<span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="n">AddDbContext</span><span class="p">&lt;</span><span class="n">HrmDbContext</span><span class="p">&gt;(</span><span class="n">options</span> <span class="p">=&gt;</span>
    <span class="n">options</span><span class="p">.</span><span class="nf">UseSqlServer</span><span class="p">(</span><span class="n">builder</span><span class="p">.</span><span class="n">Configuration</span><span class="p">.</span><span class="nf">GetConnectionString</span><span class="p">(</span><span class="s">"DefaultConnection"</span><span class="p">)));</span>

<span class="c1">// Register business services for dependency injection</span>
<span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="n">AddScoped</span><span class="p">&lt;</span><span class="n">IDepartmentService</span><span class="p">,</span> <span class="n">DepartmentService</span><span class="p">&gt;();</span>
<span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="n">AddScoped</span><span class="p">&lt;</span><span class="n">IEmployeeService</span><span class="p">,</span> <span class="n">EmployeeService</span><span class="p">&gt;();</span>

<span class="c1">// Configure API documentation</span>
<span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="nf">AddEndpointsApiExplorer</span><span class="p">();</span>

<span class="c1">// Conditionally add Swagger based on environment configuration</span>
<span class="kt">var</span> <span class="n">apiSettings</span> <span class="p">=</span> <span class="n">builder</span><span class="p">.</span><span class="n">Configuration</span><span class="p">.</span><span class="nf">GetSection</span><span class="p">(</span><span class="s">"ApiSettings"</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">apiSettings</span><span class="p">.</span><span class="n">GetValue</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;(</span><span class="s">"EnableSwagger"</span><span class="p">))</span>
<span class="p">{</span>
    <span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="nf">AddSwaggerGen</span><span class="p">(</span><span class="n">c</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="n">c</span><span class="p">.</span><span class="nf">SwaggerDoc</span><span class="p">(</span><span class="s">"v1"</span><span class="p">,</span> <span class="k">new</span><span class="p">()</span> 
        <span class="p">{</span> 
            <span class="n">Title</span> <span class="p">=</span> <span class="n">apiSettings</span><span class="p">.</span><span class="n">GetValue</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="s">"Title"</span><span class="p">),</span> 
            <span class="n">Version</span> <span class="p">=</span> <span class="n">apiSettings</span><span class="p">.</span><span class="n">GetValue</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="s">"Version"</span><span class="p">)</span> 
        <span class="p">});</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="kt">var</span> <span class="n">app</span> <span class="p">=</span> <span class="n">builder</span><span class="p">.</span><span class="nf">Build</span><span class="p">();</span>

<span class="c1">// Configure the HTTP request pipeline based on environment</span>
<span class="k">if</span> <span class="p">(</span><span class="n">app</span><span class="p">.</span><span class="n">Environment</span><span class="p">.</span><span class="nf">IsDevelopment</span><span class="p">()</span> <span class="p">||</span> <span class="n">app</span><span class="p">.</span><span class="n">Environment</span><span class="p">.</span><span class="n">EnvironmentName</span> <span class="p">==</span> <span class="s">"QA"</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">apiSettings</span><span class="p">.</span><span class="n">GetValue</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;(</span><span class="s">"EnableSwagger"</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">app</span><span class="p">.</span><span class="nf">UseSwagger</span><span class="p">();</span>
        <span class="n">app</span><span class="p">.</span><span class="nf">UseSwaggerUI</span><span class="p">(</span><span class="n">c</span> <span class="p">=&gt;</span>
        <span class="p">{</span>
            <span class="n">c</span><span class="p">.</span><span class="nf">SwaggerEndpoint</span><span class="p">(</span><span class="s">"/swagger/v1/swagger.json"</span><span class="p">,</span> <span class="n">apiSettings</span><span class="p">.</span><span class="n">GetValue</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="s">"Title"</span><span class="p">));</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">app</span><span class="p">.</span><span class="nf">UseHttpsRedirection</span><span class="p">();</span>
<span class="n">app</span><span class="p">.</span><span class="nf">UseAuthorization</span><span class="p">();</span>
<span class="n">app</span><span class="p">.</span><span class="nf">MapControllers</span><span class="p">();</span>

<span class="c1">// Ensure database is created (for development/demo purposes)</span>
<span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">scope</span> <span class="p">=</span> <span class="n">app</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="nf">CreateScope</span><span class="p">())</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">context</span> <span class="p">=</span> <span class="n">scope</span><span class="p">.</span><span class="n">ServiceProvider</span><span class="p">.</span><span class="n">GetRequiredService</span><span class="p">&lt;</span><span class="n">HrmDbContext</span><span class="p">&gt;();</span>
    <span class="n">context</span><span class="p">.</span><span class="n">Database</span><span class="p">.</span><span class="nf">EnsureCreated</span><span class="p">();</span>
<span class="p">}</span>

<span class="n">app</span><span class="p">.</span><span class="nf">Run</span><span class="p">();</span>
</code></pre></div></div>

<p>Note: <code class="language-plaintext highlighter-rouge">EnsureCreated()</code> is used for demo purposes. For production, use <code class="language-plaintext highlighter-rouge">Database.Migrate()</code> and controlled migrations.</p>

<p><strong>Step 8: Create and Apply Database Migrations</strong></p>

<p>Navigate to the API project and create/apply migrations for each environment:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cd</span><span class="w"> </span><span class="nx">d:/Projects/GitHub/rnd/projects/in-progress/multi-env-app/src/HRM/HRM.API</span><span class="w">

</span><span class="c"># Create initial migration</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">ef</span><span class="w"> </span><span class="nx">migrations</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="nx">InitialCreate</span><span class="w">

</span><span class="c"># Apply migration to Development database</span><span class="w">
</span><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">ASPNETCORE_ENVIRONMENT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Development"</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">ef</span><span class="w"> </span><span class="nx">database</span><span class="w"> </span><span class="nx">update</span><span class="w">

</span><span class="c"># Apply migration to QA database</span><span class="w">
</span><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">ASPNETCORE_ENVIRONMENT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"QA"</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">ef</span><span class="w"> </span><span class="nx">database</span><span class="w"> </span><span class="nx">update</span><span class="w">

</span><span class="c"># Apply migration to Production database (when ready)</span><span class="w">
</span><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">ASPNETCORE_ENVIRONMENT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Production"</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">ef</span><span class="w"> </span><span class="nx">database</span><span class="w"> </span><span class="nx">update</span><span class="w">
</span></code></pre></div></div>

<p><strong>When models change, add new migrations:</strong></p>
<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">ASPNETCORE_ENVIRONMENT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Development"</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">ef</span><span class="w"> </span><span class="nx">migrations</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="nx">AddNewField</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">ef</span><span class="w"> </span><span class="nx">database</span><span class="w"> </span><span class="nx">update</span><span class="w">
</span></code></pre></div></div>

<p><strong>Verify Database Creation:</strong>
After running migrations, you should have three separate databases:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">HRM_DEV</code> (Development)</li>
  <li><code class="language-plaintext highlighter-rouge">HRM_QA</code> (QA)</li>
  <li><code class="language-plaintext highlighter-rouge">HRM_Prod</code> (Production)</li>
</ul>

<p>Each database contains the seeded data from <code class="language-plaintext highlighter-rouge">HrmDbContext</code>, providing consistent test data across environments.</p>

<p><strong>Step 9: Run and Test the API Across Environments</strong></p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cd</span><span class="w"> </span><span class="nx">d:/Projects/GitHub/rnd/projects/in-progress/multi-env-app/src/HRM/HRM.API</span><span class="w">

</span><span class="c"># Run in Development with Swagger UI</span><span class="w">
</span><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">ASPNETCORE_ENVIRONMENT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Development"</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">run</span><span class="w"> </span><span class="nt">--launch-profile</span><span class="w"> </span><span class="nx">development</span><span class="w">
</span><span class="c"># Access: http://localhost:5152/swagger</span><span class="w">

</span><span class="c"># Run in QA environment</span><span class="w">
</span><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">ASPNETCORE_ENVIRONMENT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"QA"</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">run</span><span class="w"> </span><span class="nt">--launch-profile</span><span class="w"> </span><span class="nx">qa</span><span class="w">
</span><span class="c"># Access: http://localhost:5153/swagger</span><span class="w">

</span><span class="c"># Run in Production mode (no Swagger)</span><span class="w">
</span><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">ASPNETCORE_ENVIRONMENT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Production"</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">run</span><span class="w"> </span><span class="nt">--launch-profile</span><span class="w"> </span><span class="nx">production</span><span class="w">
</span><span class="c"># Access: http://localhost:5154/api/departments</span><span class="w">
</span></code></pre></div></div>

<p><strong>Environment-Specific Features:</strong></p>
<ul>
  <li><strong>Development</strong>: Swagger UI enabled, detailed logging, debug information</li>
  <li><strong>QA</strong>: Swagger UI enabled, moderate logging, similar to production but with testing features</li>
  <li><strong>Production</strong>: Swagger disabled, minimal logging, optimized for performance</li>
</ul>

<p><strong>Run the application for different environments using Visual Studio</strong></p>
<ul>
  <li>Select the desired profile (development, qa, production) from the debug dropdown and run.</li>
</ul>

<p><strong>Step 10: API Testing and Validation</strong></p>

<p><strong>Manual Testing with PowerShell:</strong></p>
<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Test Development environment</span><span class="w">
</span><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">ASPNETCORE_ENVIRONMENT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Development"</span><span class="w">
</span><span class="c"># Start the API in another terminal: dotnet run --launch-profile development</span><span class="w">

</span><span class="c"># Get all departments</span><span class="w">
</span><span class="n">Invoke-RestMethod</span><span class="w"> </span><span class="nt">-Method</span><span class="w"> </span><span class="nx">GET</span><span class="w"> </span><span class="nt">-Uri</span><span class="w"> </span><span class="s2">"http://localhost:5152/api/departments"</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ConvertTo-Json</span><span class="w">

</span><span class="c"># Get all employees</span><span class="w">
</span><span class="n">Invoke-RestMethod</span><span class="w"> </span><span class="nt">-Method</span><span class="w"> </span><span class="nx">GET</span><span class="w"> </span><span class="nt">-Uri</span><span class="w"> </span><span class="s2">"http://localhost:5152/api/employees"</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ConvertTo-Json</span><span class="w">

</span><span class="c"># Create a new department</span><span class="w">
</span><span class="nv">$newDept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@{</span><span class="w">
    </span><span class="nx">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Research &amp; Development"</span><span class="w">
    </span><span class="nx">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Innovation and product development"</span><span class="w">
    </span><span class="nx">isActive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$true</span><span class="w">
</span><span class="p">}</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ConvertTo-Json</span><span class="w">

</span><span class="n">Invoke-RestMethod</span><span class="w"> </span><span class="nt">-Method</span><span class="w"> </span><span class="nx">POST</span><span class="w"> </span><span class="nt">-Uri</span><span class="w"> </span><span class="s2">"http://localhost:5152/api/departments"</span><span class="w"> </span><span class="nt">-ContentType</span><span class="w"> </span><span class="s2">"application/json"</span><span class="w"> </span><span class="nt">-Body</span><span class="w"> </span><span class="nv">$newDept</span><span class="w">

</span><span class="c"># Create a new employee</span><span class="w">
</span><span class="nv">$newEmployee</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@{</span><span class="w">
    </span><span class="nx">firstName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"John"</span><span class="w">
    </span><span class="nx">lastName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Doe"</span><span class="w">
    </span><span class="nx">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"john.doe@company.com"</span><span class="w">
    </span><span class="nx">phoneNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"+1-555-1234"</span><span class="w">
    </span><span class="nx">hireDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"2024-10-12T00:00:00"</span><span class="w">
    </span><span class="nx">salary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">75000.00</span><span class="w">
    </span><span class="nx">departmentId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="p">}</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ConvertTo-Json</span><span class="w">

</span><span class="n">Invoke-RestMethod</span><span class="w"> </span><span class="nt">-Method</span><span class="w"> </span><span class="nx">POST</span><span class="w"> </span><span class="nt">-Uri</span><span class="w"> </span><span class="s2">"http://localhost:5152/api/employees"</span><span class="w"> </span><span class="nt">-ContentType</span><span class="w"> </span><span class="s2">"application/json"</span><span class="w"> </span><span class="nt">-Body</span><span class="w"> </span><span class="nv">$newEmployee</span><span class="w">
</span></code></pre></div></div>

<p><strong>Using VS Code REST Client:</strong>
Create <code class="language-plaintext highlighter-rouge">test-requests.http</code> in the HRM.API project:</p>
<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">### Get all departments
GET http://localhost:5152/api/departments
Accept: application/json

### Get all employees
GET http://localhost:5152/api/employees
Accept: application/json

### Create new department
POST http://localhost:5152/api/departments
Content-Type: application/json

{
  "name": "Quality Assurance",
  "description": "Software testing and quality control",
  "isActive": true
}

### Create new employee
POST http://localhost:5152/api/employees
Content-Type: application/json

{
  "firstName": "Jane",
  "lastName": "Smith",
  "email": "jane.smith@company.com",
  "phoneNumber": "+1-555-5678",
  "hireDate": "2024-10-12T00:00:00",
  "salary": 80000.00,
  "departmentId": 1
}
</span></code></pre></div></div>

<p><strong>Step 11: Create Automated Testing Infrastructure</strong></p>

<p><strong>Create Test Project:</strong></p>
<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Navigate to HRM solution directory</span><span class="w">
</span><span class="n">cd</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="c"># from HRM.API to HRM</span><span class="w">

</span><span class="c"># Create test project</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">new</span><span class="w"> </span><span class="nx">xunit</span><span class="w"> </span><span class="nt">-n</span><span class="w"> </span><span class="nx">HRM.Tests</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">sln</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="nx">HRM.Tests/HRM.Tests.csproj</span><span class="w">

</span><span class="c"># Add test packages and project reference</span><span class="w">
</span><span class="n">cd</span><span class="w"> </span><span class="nx">HRM.Tests</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="nx">package</span><span class="w"> </span><span class="nx">Microsoft.AspNetCore.Mvc.Testing</span><span class="w"> </span><span class="nt">--version</span><span class="w"> </span><span class="nx">9.0.0</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="nx">package</span><span class="w"> </span><span class="nx">Microsoft.EntityFrameworkCore.InMemory</span><span class="w"> </span><span class="nt">--version</span><span class="w"> </span><span class="nx">9.0.0</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="nx">package</span><span class="w"> </span><span class="nx">FluentAssertions</span><span class="w"> </span><span class="nt">--version</span><span class="w"> </span><span class="nx">6.12.0</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="nx">reference</span><span class="w"> </span><span class="o">..</span><span class="nx">/HRM.API/HRM.API.csproj</span><span class="w">
</span></code></pre></div></div>

<p><strong>Create Integration Test Infrastructure:</strong></p>

<p>Create <code class="language-plaintext highlighter-rouge">HRM.Tests/TestWebApplicationFactory.cs</code>:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">Microsoft.AspNetCore.Hosting</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Microsoft.AspNetCore.Mvc.Testing</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Microsoft.EntityFrameworkCore</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Microsoft.Extensions.DependencyInjection</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Microsoft.Extensions.Logging</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">HRM.API.Data</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">HRM.Tests</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">TestWebApplicationFactory</span><span class="p">&lt;</span><span class="n">TStartup</span><span class="p">&gt;</span> <span class="p">:</span> <span class="n">WebApplicationFactory</span><span class="p">&lt;</span><span class="n">TStartup</span><span class="p">&gt;</span> <span class="k">where</span> <span class="n">TStartup</span> <span class="p">:</span> <span class="k">class</span>
    <span class="err">{</span>
        <span class="nc">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">ConfigureWebHost</span><span class="p">(</span><span class="n">IWebHostBuilder</span> <span class="n">builder</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">builder</span><span class="p">.</span><span class="nf">ConfigureServices</span><span class="p">(</span><span class="n">services</span> <span class="p">=&gt;</span>
            <span class="p">{</span>
                <span class="c1">// Remove the real database context</span>
                <span class="kt">var</span> <span class="n">descriptor</span> <span class="p">=</span> <span class="n">services</span><span class="p">.</span><span class="nf">SingleOrDefault</span><span class="p">(</span>
                    <span class="n">d</span> <span class="p">=&gt;</span> <span class="n">d</span><span class="p">.</span><span class="n">ServiceType</span> <span class="p">==</span> <span class="k">typeof</span><span class="p">(</span><span class="n">DbContextOptions</span><span class="p">&lt;</span><span class="n">HrmDbContext</span><span class="p">&gt;));</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">descriptor</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">services</span><span class="p">.</span><span class="nf">Remove</span><span class="p">(</span><span class="n">descriptor</span><span class="p">);</span>
                <span class="p">}</span>

                <span class="c1">// Add in-memory database for testing</span>
                <span class="n">services</span><span class="p">.</span><span class="n">AddDbContext</span><span class="p">&lt;</span><span class="n">HrmDbContext</span><span class="p">&gt;(</span><span class="n">options</span> <span class="p">=&gt;</span>
                <span class="p">{</span>
                    <span class="n">options</span><span class="p">.</span><span class="nf">UseInMemoryDatabase</span><span class="p">(</span><span class="s">"InMemoryDbForTesting"</span><span class="p">);</span>
                <span class="p">});</span>

                <span class="c1">// Build the service provider and create the database</span>
                <span class="kt">var</span> <span class="n">sp</span> <span class="p">=</span> <span class="n">services</span><span class="p">.</span><span class="nf">BuildServiceProvider</span><span class="p">();</span>
                <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">scope</span> <span class="p">=</span> <span class="n">sp</span><span class="p">.</span><span class="nf">CreateScope</span><span class="p">())</span>
                <span class="p">{</span>
                    <span class="kt">var</span> <span class="n">scopedServices</span> <span class="p">=</span> <span class="n">scope</span><span class="p">.</span><span class="n">ServiceProvider</span><span class="p">;</span>
                    <span class="kt">var</span> <span class="n">db</span> <span class="p">=</span> <span class="n">scopedServices</span><span class="p">.</span><span class="n">GetRequiredService</span><span class="p">&lt;</span><span class="n">HrmDbContext</span><span class="p">&gt;();</span>
                    <span class="kt">var</span> <span class="n">logger</span> <span class="p">=</span> <span class="n">scopedServices</span><span class="p">.</span><span class="n">GetRequiredService</span><span class="p">&lt;</span><span class="n">ILogger</span><span class="p">&lt;</span><span class="n">TestWebApplicationFactory</span><span class="p">&lt;</span><span class="n">TStartup</span><span class="p">&gt;&gt;&gt;();</span>

                    <span class="c1">// Ensure the database is created</span>
                    <span class="n">db</span><span class="p">.</span><span class="n">Database</span><span class="p">.</span><span class="nf">EnsureCreated</span><span class="p">();</span>

                    <span class="k">try</span>
                    <span class="p">{</span>
                        <span class="c1">// Seed test data if needed</span>
                        <span class="nf">SeedTestData</span><span class="p">(</span><span class="n">db</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="n">logger</span><span class="p">.</span><span class="nf">LogError</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="s">"An error occurred seeding the database with test messages. Error: {Message}"</span><span class="p">,</span> <span class="n">ex</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">});</span>

            <span class="n">builder</span><span class="p">.</span><span class="nf">UseEnvironment</span><span class="p">(</span><span class="s">"Testing"</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">SeedTestData</span><span class="p">(</span><span class="n">HrmDbContext</span> <span class="n">context</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// Add additional test data if needed beyond what's in OnModelCreating</span>
            <span class="k">if</span> <span class="p">(!</span><span class="n">context</span><span class="p">.</span><span class="n">Departments</span><span class="p">.</span><span class="nf">Any</span><span class="p">())</span>
            <span class="p">{</span>
                <span class="n">context</span><span class="p">.</span><span class="n">Departments</span><span class="p">.</span><span class="nf">AddRange</span><span class="p">(</span>
                    <span class="k">new</span> <span class="n">HRM</span><span class="p">.</span><span class="n">API</span><span class="p">.</span><span class="n">Models</span><span class="p">.</span><span class="n">Department</span> <span class="p">{</span> <span class="n">Name</span> <span class="p">=</span> <span class="s">"Test HR"</span><span class="p">,</span> <span class="n">Description</span> <span class="p">=</span> <span class="s">"Test HR Department"</span><span class="p">,</span> <span class="n">IsActive</span> <span class="p">=</span> <span class="k">true</span> <span class="p">},</span>
                    <span class="k">new</span> <span class="n">HRM</span><span class="p">.</span><span class="n">API</span><span class="p">.</span><span class="n">Models</span><span class="p">.</span><span class="n">Department</span> <span class="p">{</span> <span class="n">Name</span> <span class="p">=</span> <span class="s">"Test IT"</span><span class="p">,</span> <span class="n">Description</span> <span class="p">=</span> <span class="s">"Test IT Department"</span><span class="p">,</span> <span class="n">IsActive</span> <span class="p">=</span> <span class="k">true</span> <span class="p">}</span>
                <span class="p">);</span>
                <span class="n">context</span><span class="p">.</span><span class="nf">SaveChanges</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Create Department Integration Tests:</strong></p>

<p>Create <code class="language-plaintext highlighter-rouge">HRM.Tests/IntegrationTests/DepartmentControllerTests.cs</code>:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">System.Net.Http.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">FluentAssertions</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">HRM.API</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">HRM.API.DTOs</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Xunit</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">HRM.Tests.IntegrationTests</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">DepartmentControllerTests</span> <span class="p">:</span> <span class="n">IClassFixture</span><span class="p">&lt;</span><span class="n">TestWebApplicationFactory</span><span class="p">&lt;</span><span class="n">Program</span><span class="p">&gt;&gt;</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">_client</span><span class="p">;</span>
        <span class="k">private</span> <span class="k">readonly</span> <span class="n">TestWebApplicationFactory</span><span class="p">&lt;</span><span class="n">Program</span><span class="p">&gt;</span> <span class="n">_factory</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">DepartmentControllerTests</span><span class="p">(</span><span class="n">TestWebApplicationFactory</span><span class="p">&lt;</span><span class="n">Program</span><span class="p">&gt;</span> <span class="n">factory</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">_factory</span> <span class="p">=</span> <span class="n">factory</span><span class="p">;</span>
            <span class="n">_client</span> <span class="p">=</span> <span class="n">_factory</span><span class="p">.</span><span class="nf">CreateClient</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">GetDepartments_ReturnsSuccessAndCorrectContentType</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_client</span><span class="p">.</span><span class="nf">GetAsync</span><span class="p">(</span><span class="s">"/api/departments"</span><span class="p">);</span>

            <span class="c1">// Assert</span>
            <span class="n">response</span><span class="p">.</span><span class="n">StatusCode</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="n">HttpStatusCode</span><span class="p">.</span><span class="n">OK</span><span class="p">);</span>
            <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="n">ContentType</span><span class="p">?.</span><span class="nf">ToString</span><span class="p">()</span>
                <span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Contain</span><span class="p">(</span><span class="s">"application/json"</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">GetDepartments_ReturnsListOfDepartments</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_client</span><span class="p">.</span><span class="nf">GetAsync</span><span class="p">(</span><span class="s">"/api/departments"</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">content</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>
            <span class="kt">var</span> <span class="n">departments</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="n">DeserializeObject</span><span class="p">&lt;</span><span class="n">List</span><span class="p">&lt;</span><span class="n">DepartmentDto</span><span class="p">&gt;&gt;(</span><span class="n">content</span><span class="p">);</span>

            <span class="c1">// Assert</span>
            <span class="n">response</span><span class="p">.</span><span class="n">StatusCode</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="n">HttpStatusCode</span><span class="p">.</span><span class="n">OK</span><span class="p">);</span>
            <span class="n">departments</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">NotBeNull</span><span class="p">();</span>
            <span class="n">departments</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">HaveCountGreaterThan</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
            <span class="n">departments</span><span class="p">!.</span><span class="nf">First</span><span class="p">().</span><span class="n">Name</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">NotBeNullOrEmpty</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">GetDepartment_WithValidId_ReturnsSuccessAndCorrectDepartment</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Arrange - First get all departments to find a valid ID</span>
            <span class="kt">var</span> <span class="n">allDepartmentsResponse</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_client</span><span class="p">.</span><span class="nf">GetAsync</span><span class="p">(</span><span class="s">"/api/departments"</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">allDepartmentsContent</span> <span class="p">=</span> <span class="k">await</span> <span class="n">allDepartmentsResponse</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>
            <span class="kt">var</span> <span class="n">allDepartments</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="n">DeserializeObject</span><span class="p">&lt;</span><span class="n">List</span><span class="p">&lt;</span><span class="n">DepartmentDto</span><span class="p">&gt;&gt;(</span><span class="n">allDepartmentsContent</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">firstDepartment</span> <span class="p">=</span> <span class="n">allDepartments</span><span class="p">!.</span><span class="nf">First</span><span class="p">();</span>

            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_client</span><span class="p">.</span><span class="nf">GetAsync</span><span class="p">(</span><span class="s">$"/api/departments/</span><span class="p">{</span><span class="n">firstDepartment</span><span class="p">.</span><span class="n">DepartmentId</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">content</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>
            <span class="kt">var</span> <span class="n">department</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="n">DeserializeObject</span><span class="p">&lt;</span><span class="n">DepartmentDto</span><span class="p">&gt;(</span><span class="n">content</span><span class="p">);</span>

            <span class="c1">// Assert</span>
            <span class="n">response</span><span class="p">.</span><span class="n">StatusCode</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="n">HttpStatusCode</span><span class="p">.</span><span class="n">OK</span><span class="p">);</span>
            <span class="n">department</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">NotBeNull</span><span class="p">();</span>
            <span class="n">department</span><span class="p">!.</span><span class="n">DepartmentId</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="n">firstDepartment</span><span class="p">.</span><span class="n">DepartmentId</span><span class="p">);</span>
            <span class="n">department</span><span class="p">.</span><span class="n">Name</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="n">firstDepartment</span><span class="p">.</span><span class="n">Name</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">GetDepartment_WithInvalidId_ReturnsNotFound</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_client</span><span class="p">.</span><span class="nf">GetAsync</span><span class="p">(</span><span class="s">"/api/departments/99999"</span><span class="p">);</span>

            <span class="c1">// Assert</span>
            <span class="n">response</span><span class="p">.</span><span class="n">StatusCode</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="n">HttpStatusCode</span><span class="p">.</span><span class="n">NotFound</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">CreateDepartment_WithValidData_ReturnsCreated</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Arrange</span>
            <span class="kt">var</span> <span class="n">newDepartment</span> <span class="p">=</span> <span class="k">new</span> <span class="n">CreateDepartmentDto</span>
            <span class="p">{</span>
                <span class="n">Name</span> <span class="p">=</span> <span class="s">$"Test Department </span><span class="p">{</span><span class="n">Guid</span><span class="p">.</span><span class="nf">NewGuid</span><span class="p">()}</span><span class="s">"</span><span class="p">,</span>
                <span class="n">Description</span> <span class="p">=</span> <span class="s">"Integration test department"</span><span class="p">,</span>
                <span class="n">IsActive</span> <span class="p">=</span> <span class="k">true</span>
            <span class="p">};</span>

            <span class="kt">var</span> <span class="n">json</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">newDepartment</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">json</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="s">"/api/departments"</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">responseContent</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>
            <span class="kt">var</span> <span class="n">createdDepartment</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="n">DeserializeObject</span><span class="p">&lt;</span><span class="n">DepartmentDto</span><span class="p">&gt;(</span><span class="n">responseContent</span><span class="p">);</span>

            <span class="c1">// Assert</span>
            <span class="n">response</span><span class="p">.</span><span class="n">StatusCode</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="n">HttpStatusCode</span><span class="p">.</span><span class="n">Created</span><span class="p">);</span>
            <span class="n">createdDepartment</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">NotBeNull</span><span class="p">();</span>
            <span class="n">createdDepartment</span><span class="p">!.</span><span class="n">Name</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="n">newDepartment</span><span class="p">.</span><span class="n">Name</span><span class="p">);</span>
            <span class="n">createdDepartment</span><span class="p">.</span><span class="n">Description</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="n">newDepartment</span><span class="p">.</span><span class="n">Description</span><span class="p">);</span>
            <span class="n">createdDepartment</span><span class="p">.</span><span class="n">IsActive</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="n">newDepartment</span><span class="p">.</span><span class="n">IsActive</span><span class="p">);</span>
            <span class="n">createdDepartment</span><span class="p">.</span><span class="n">DepartmentId</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">BeGreaterThan</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">CreateDepartment_WithInvalidData_ReturnsBadRequest</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Arrange - Create department with missing required field</span>
            <span class="kt">var</span> <span class="n">invalidDepartment</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span> <span class="n">Description</span> <span class="p">=</span> <span class="s">"Missing name field"</span> <span class="p">};</span>
            <span class="kt">var</span> <span class="n">json</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">invalidDepartment</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">json</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="s">"/api/departments"</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>

            <span class="c1">// Assert</span>
            <span class="n">response</span><span class="p">.</span><span class="n">StatusCode</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="n">HttpStatusCode</span><span class="p">.</span><span class="n">BadRequest</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">DeleteDepartment_WithValidId_ReturnsNoContent</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Arrange - First create a department to delete</span>
            <span class="kt">var</span> <span class="n">newDepartment</span> <span class="p">=</span> <span class="k">new</span> <span class="n">CreateDepartmentDto</span>
            <span class="p">{</span>
                <span class="n">Name</span> <span class="p">=</span> <span class="s">$"Department to Delete </span><span class="p">{</span><span class="n">Guid</span><span class="p">.</span><span class="nf">NewGuid</span><span class="p">()}</span><span class="s">"</span><span class="p">,</span>
                <span class="n">Description</span> <span class="p">=</span> <span class="s">"Will be deleted"</span><span class="p">,</span>
                <span class="n">IsActive</span> <span class="p">=</span> <span class="k">true</span>
            <span class="p">};</span>

            <span class="kt">var</span> <span class="n">json</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">newDepartment</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">json</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

            <span class="kt">var</span> <span class="n">createResponse</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="s">"/api/departments"</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">createContent</span> <span class="p">=</span> <span class="k">await</span> <span class="n">createResponse</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>
            <span class="kt">var</span> <span class="n">createdDepartment</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="n">DeserializeObject</span><span class="p">&lt;</span><span class="n">DepartmentDto</span><span class="p">&gt;(</span><span class="n">createContent</span><span class="p">);</span>

            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">deleteResponse</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_client</span><span class="p">.</span><span class="nf">DeleteAsync</span><span class="p">(</span><span class="s">$"/api/departments/</span><span class="p">{</span><span class="n">createdDepartment</span><span class="p">!.</span><span class="n">DepartmentId</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>

            <span class="c1">// Assert</span>
            <span class="n">deleteResponse</span><span class="p">.</span><span class="n">StatusCode</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="n">HttpStatusCode</span><span class="p">.</span><span class="n">NoContent</span><span class="p">);</span>

            <span class="c1">// Verify it's actually deleted</span>
            <span class="kt">var</span> <span class="n">getResponse</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_client</span><span class="p">.</span><span class="nf">GetAsync</span><span class="p">(</span><span class="s">$"/api/departments/</span><span class="p">{</span><span class="n">createdDepartment</span><span class="p">.</span><span class="n">DepartmentId</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
            <span class="n">getResponse</span><span class="p">.</span><span class="n">StatusCode</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="n">HttpStatusCode</span><span class="p">.</span><span class="n">NotFound</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">DeleteDepartment_WithInvalidId_ReturnsNotFound</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_client</span><span class="p">.</span><span class="nf">DeleteAsync</span><span class="p">(</span><span class="s">"/api/departments/99999"</span><span class="p">);</span>

            <span class="c1">// Assert</span>
            <span class="n">response</span><span class="p">.</span><span class="n">StatusCode</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="n">HttpStatusCode</span><span class="p">.</span><span class="n">NotFound</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Create Employee Integration Tests:</strong></p>

<p>Create <code class="language-plaintext highlighter-rouge">HRM.Tests/IntegrationTests/EmployeeControllerTests.cs</code>:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">System.Net.Http.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">FluentAssertions</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">HRM.API</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">HRM.API.DTOs</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Xunit</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">HRM.Tests.IntegrationTests</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">EmployeeControllerTests</span> <span class="p">:</span> <span class="n">IClassFixture</span><span class="p">&lt;</span><span class="n">TestWebApplicationFactory</span><span class="p">&lt;</span><span class="n">Program</span><span class="p">&gt;&gt;</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">_client</span><span class="p">;</span>
        <span class="k">private</span> <span class="k">readonly</span> <span class="n">TestWebApplicationFactory</span><span class="p">&lt;</span><span class="n">Program</span><span class="p">&gt;</span> <span class="n">_factory</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">EmployeeControllerTests</span><span class="p">(</span><span class="n">TestWebApplicationFactory</span><span class="p">&lt;</span><span class="n">Program</span><span class="p">&gt;</span> <span class="n">factory</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">_factory</span> <span class="p">=</span> <span class="n">factory</span><span class="p">;</span>
            <span class="n">_client</span> <span class="p">=</span> <span class="n">_factory</span><span class="p">.</span><span class="nf">CreateClient</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">GetEmployees_ReturnsSuccessAndCorrectContentType</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_client</span><span class="p">.</span><span class="nf">GetAsync</span><span class="p">(</span><span class="s">"/api/employees"</span><span class="p">);</span>

            <span class="c1">// Assert</span>
            <span class="n">response</span><span class="p">.</span><span class="n">StatusCode</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="n">HttpStatusCode</span><span class="p">.</span><span class="n">OK</span><span class="p">);</span>
            <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="n">ContentType</span><span class="p">?.</span><span class="nf">ToString</span><span class="p">()</span>
                <span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Contain</span><span class="p">(</span><span class="s">"application/json"</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">GetEmployees_ReturnsListOfEmployees</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_client</span><span class="p">.</span><span class="nf">GetAsync</span><span class="p">(</span><span class="s">"/api/employees"</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">content</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>
            <span class="kt">var</span> <span class="n">employees</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="n">DeserializeObject</span><span class="p">&lt;</span><span class="n">List</span><span class="p">&lt;</span><span class="n">EmployeeDto</span><span class="p">&gt;&gt;(</span><span class="n">content</span><span class="p">);</span>

            <span class="c1">// Assert</span>
            <span class="n">response</span><span class="p">.</span><span class="n">StatusCode</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="n">HttpStatusCode</span><span class="p">.</span><span class="n">OK</span><span class="p">);</span>
            <span class="n">employees</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">NotBeNull</span><span class="p">();</span>
            <span class="n">employees</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">HaveCountGreaterThan</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
            <span class="n">employees</span><span class="p">!.</span><span class="nf">First</span><span class="p">().</span><span class="n">FirstName</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">NotBeNullOrEmpty</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">CreateEmployee_WithValidData_ReturnsCreated</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Arrange - Get a valid department ID first</span>
            <span class="kt">var</span> <span class="n">departmentsResponse</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_client</span><span class="p">.</span><span class="nf">GetAsync</span><span class="p">(</span><span class="s">"/api/departments"</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">departmentsContent</span> <span class="p">=</span> <span class="k">await</span> <span class="n">departmentsResponse</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>
            <span class="kt">var</span> <span class="n">departments</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="n">DeserializeObject</span><span class="p">&lt;</span><span class="n">List</span><span class="p">&lt;</span><span class="n">DepartmentDto</span><span class="p">&gt;&gt;(</span><span class="n">departmentsContent</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">validDepartmentId</span> <span class="p">=</span> <span class="n">departments</span><span class="p">!.</span><span class="nf">First</span><span class="p">().</span><span class="n">DepartmentId</span><span class="p">;</span>

            <span class="kt">var</span> <span class="n">newEmployee</span> <span class="p">=</span> <span class="k">new</span> <span class="n">CreateEmployeeDto</span>
            <span class="p">{</span>
                <span class="n">FirstName</span> <span class="p">=</span> <span class="s">"Integration"</span><span class="p">,</span>
                <span class="n">LastName</span> <span class="p">=</span> <span class="s">"Test"</span><span class="p">,</span>
                <span class="n">Email</span> <span class="p">=</span> <span class="s">$"integration.test.</span><span class="p">{</span><span class="n">Guid</span><span class="p">.</span><span class="nf">NewGuid</span><span class="p">()}</span><span class="s">@company.com"</span><span class="p">,</span>
                <span class="n">PhoneNumber</span> <span class="p">=</span> <span class="s">"+1-555-TEST"</span><span class="p">,</span>
                <span class="n">HireDate</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span><span class="p">,</span>
                <span class="n">Salary</span> <span class="p">=</span> <span class="m">75000m</span><span class="p">,</span>
                <span class="n">DepartmentId</span> <span class="p">=</span> <span class="n">validDepartmentId</span>
            <span class="p">};</span>

            <span class="kt">var</span> <span class="n">json</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">newEmployee</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">json</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="s">"/api/employees"</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">responseContent</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>
            <span class="kt">var</span> <span class="n">createdEmployee</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="n">DeserializeObject</span><span class="p">&lt;</span><span class="n">EmployeeDto</span><span class="p">&gt;(</span><span class="n">responseContent</span><span class="p">);</span>

            <span class="c1">// Assert</span>
            <span class="n">response</span><span class="p">.</span><span class="n">StatusCode</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="n">HttpStatusCode</span><span class="p">.</span><span class="n">Created</span><span class="p">);</span>
            <span class="n">createdEmployee</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">NotBeNull</span><span class="p">();</span>
            <span class="n">createdEmployee</span><span class="p">!.</span><span class="n">FirstName</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="n">newEmployee</span><span class="p">.</span><span class="n">FirstName</span><span class="p">);</span>
            <span class="n">createdEmployee</span><span class="p">.</span><span class="n">LastName</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="n">newEmployee</span><span class="p">.</span><span class="n">LastName</span><span class="p">);</span>
            <span class="n">createdEmployee</span><span class="p">.</span><span class="n">Email</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="n">newEmployee</span><span class="p">.</span><span class="n">Email</span><span class="p">);</span>
            <span class="n">createdEmployee</span><span class="p">.</span><span class="n">EmployeeId</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">BeGreaterThan</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">UpdateEmployee_WithValidData_ReturnsSuccess</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Arrange - First create an employee</span>
            <span class="kt">var</span> <span class="n">departmentsResponse</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_client</span><span class="p">.</span><span class="nf">GetAsync</span><span class="p">(</span><span class="s">"/api/departments"</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">departmentsContent</span> <span class="p">=</span> <span class="k">await</span> <span class="n">departmentsResponse</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>
            <span class="kt">var</span> <span class="n">departments</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="n">DeserializeObject</span><span class="p">&lt;</span><span class="n">List</span><span class="p">&lt;</span><span class="n">DepartmentDto</span><span class="p">&gt;&gt;(</span><span class="n">departmentsContent</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">validDepartmentId</span> <span class="p">=</span> <span class="n">departments</span><span class="p">!.</span><span class="nf">First</span><span class="p">().</span><span class="n">DepartmentId</span><span class="p">;</span>

            <span class="kt">var</span> <span class="n">newEmployee</span> <span class="p">=</span> <span class="k">new</span> <span class="n">CreateEmployeeDto</span>
            <span class="p">{</span>
                <span class="n">FirstName</span> <span class="p">=</span> <span class="s">"Original"</span><span class="p">,</span>
                <span class="n">LastName</span> <span class="p">=</span> <span class="s">"Name"</span><span class="p">,</span>
                <span class="n">Email</span> <span class="p">=</span> <span class="s">$"original.</span><span class="p">{</span><span class="n">Guid</span><span class="p">.</span><span class="nf">NewGuid</span><span class="p">()}</span><span class="s">@company.com"</span><span class="p">,</span>
                <span class="n">PhoneNumber</span> <span class="p">=</span> <span class="s">"+1-555-ORIG"</span><span class="p">,</span>
                <span class="n">HireDate</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span><span class="p">,</span>
                <span class="n">Salary</span> <span class="p">=</span> <span class="m">70000m</span><span class="p">,</span>
                <span class="n">DepartmentId</span> <span class="p">=</span> <span class="n">validDepartmentId</span>
            <span class="p">};</span>

            <span class="kt">var</span> <span class="n">createJson</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">newEmployee</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">createContent</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">createJson</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">createResponse</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="s">"/api/employees"</span><span class="p">,</span> <span class="n">createContent</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">createResponseContent</span> <span class="p">=</span> <span class="k">await</span> <span class="n">createResponse</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>
            <span class="kt">var</span> <span class="n">createdEmployee</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="n">DeserializeObject</span><span class="p">&lt;</span><span class="n">EmployeeDto</span><span class="p">&gt;(</span><span class="n">createResponseContent</span><span class="p">);</span>

            <span class="c1">// Update the employee</span>
            <span class="kt">var</span> <span class="n">updateEmployee</span> <span class="p">=</span> <span class="k">new</span> <span class="n">UpdateEmployeeDto</span>
            <span class="p">{</span>
                <span class="n">FirstName</span> <span class="p">=</span> <span class="s">"Updated"</span><span class="p">,</span>
                <span class="n">LastName</span> <span class="p">=</span> <span class="s">"Name"</span><span class="p">,</span>
                <span class="n">Email</span> <span class="p">=</span> <span class="n">createdEmployee</span><span class="p">!.</span><span class="n">Email</span><span class="p">,</span> <span class="c1">// Keep same email</span>
                <span class="n">PhoneNumber</span> <span class="p">=</span> <span class="s">"+1-555-UPDT"</span><span class="p">,</span>
                <span class="n">HireDate</span> <span class="p">=</span> <span class="n">createdEmployee</span><span class="p">.</span><span class="n">HireDate</span><span class="p">,</span>
                <span class="n">Salary</span> <span class="p">=</span> <span class="m">80000m</span><span class="p">,</span>
                <span class="n">DepartmentId</span> <span class="p">=</span> <span class="n">validDepartmentId</span>
            <span class="p">};</span>

            <span class="kt">var</span> <span class="n">updateJson</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">updateEmployee</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">updateContent</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">updateJson</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_client</span><span class="p">.</span><span class="nf">PutAsync</span><span class="p">(</span><span class="s">$"/api/employees/</span><span class="p">{</span><span class="n">createdEmployee</span><span class="p">.</span><span class="n">EmployeeId</span><span class="p">}</span><span class="s">"</span><span class="p">,</span> <span class="n">updateContent</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">responseContent</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>
            <span class="kt">var</span> <span class="n">updatedEmployee</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="n">DeserializeObject</span><span class="p">&lt;</span><span class="n">EmployeeDto</span><span class="p">&gt;(</span><span class="n">responseContent</span><span class="p">);</span>

            <span class="c1">// Assert</span>
            <span class="n">response</span><span class="p">.</span><span class="n">StatusCode</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="n">HttpStatusCode</span><span class="p">.</span><span class="n">OK</span><span class="p">);</span>
            <span class="n">updatedEmployee</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">NotBeNull</span><span class="p">();</span>
            <span class="n">updatedEmployee</span><span class="p">!.</span><span class="n">FirstName</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="s">"Updated"</span><span class="p">);</span>
            <span class="n">updatedEmployee</span><span class="p">.</span><span class="n">Salary</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="m">80000m</span><span class="p">);</span>
            <span class="n">updatedEmployee</span><span class="p">.</span><span class="n">EmployeeId</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="n">createdEmployee</span><span class="p">.</span><span class="n">EmployeeId</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Create Unit Tests for Services:</strong></p>

<p>Create <code class="language-plaintext highlighter-rouge">HRM.Tests/UnitTests/DepartmentServiceTests.cs</code>:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">Microsoft.EntityFrameworkCore</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">FluentAssertions</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">HRM.API.Data</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">HRM.API.Services</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">HRM.API.Models</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">HRM.API.DTOs</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Xunit</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">HRM.Tests.UnitTests</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">DepartmentServiceTests</span> <span class="p">:</span> <span class="n">IDisposable</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="k">readonly</span> <span class="n">HrmDbContext</span> <span class="n">_context</span><span class="p">;</span>
        <span class="k">private</span> <span class="k">readonly</span> <span class="n">DepartmentService</span> <span class="n">_service</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">DepartmentServiceTests</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">options</span> <span class="p">=</span> <span class="k">new</span> <span class="n">DbContextOptionsBuilder</span><span class="p">&lt;</span><span class="n">HrmDbContext</span><span class="p">&gt;()</span>
                <span class="p">.</span><span class="nf">UseInMemoryDatabase</span><span class="p">(</span><span class="n">databaseName</span><span class="p">:</span> <span class="n">Guid</span><span class="p">.</span><span class="nf">NewGuid</span><span class="p">().</span><span class="nf">ToString</span><span class="p">())</span>
                <span class="p">.</span><span class="n">Options</span><span class="p">;</span>

            <span class="n">_context</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HrmDbContext</span><span class="p">(</span><span class="n">options</span><span class="p">);</span>
            <span class="n">_service</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DepartmentService</span><span class="p">(</span><span class="n">_context</span><span class="p">);</span>

            <span class="c1">// Seed test data</span>
            <span class="nf">SeedTestData</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">SeedTestData</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">_context</span><span class="p">.</span><span class="n">Departments</span><span class="p">.</span><span class="nf">AddRange</span><span class="p">(</span>
                <span class="k">new</span> <span class="n">Department</span> <span class="p">{</span> <span class="n">DepartmentId</span> <span class="p">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">Name</span> <span class="p">=</span> <span class="s">"HR"</span><span class="p">,</span> <span class="n">Description</span> <span class="p">=</span> <span class="s">"Human Resources"</span><span class="p">,</span> <span class="n">IsActive</span> <span class="p">=</span> <span class="k">true</span> <span class="p">},</span>
                <span class="k">new</span> <span class="n">Department</span> <span class="p">{</span> <span class="n">DepartmentId</span> <span class="p">=</span> <span class="m">2</span><span class="p">,</span> <span class="n">Name</span> <span class="p">=</span> <span class="s">"IT"</span><span class="p">,</span> <span class="n">Description</span> <span class="p">=</span> <span class="s">"Information Technology"</span><span class="p">,</span> <span class="n">IsActive</span> <span class="p">=</span> <span class="k">true</span> <span class="p">},</span>
                <span class="k">new</span> <span class="n">Department</span> <span class="p">{</span> <span class="n">DepartmentId</span> <span class="p">=</span> <span class="m">3</span><span class="p">,</span> <span class="n">Name</span> <span class="p">=</span> <span class="s">"Finance"</span><span class="p">,</span> <span class="n">Description</span> <span class="p">=</span> <span class="s">"Finance Department"</span><span class="p">,</span> <span class="n">IsActive</span> <span class="p">=</span> <span class="k">false</span> <span class="p">}</span>
            <span class="p">);</span>
            <span class="n">_context</span><span class="p">.</span><span class="nf">SaveChanges</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">GetAllDepartmentsAsync_ReturnsAllDepartments</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">result</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_service</span><span class="p">.</span><span class="nf">GetAllDepartmentsAsync</span><span class="p">();</span>

            <span class="c1">// Assert</span>
            <span class="n">result</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">NotBeNull</span><span class="p">();</span>
            <span class="n">result</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">HaveCount</span><span class="p">(</span><span class="m">3</span><span class="p">);</span>
            <span class="n">result</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Contain</span><span class="p">(</span><span class="n">d</span> <span class="p">=&gt;</span> <span class="n">d</span><span class="p">.</span><span class="n">Name</span> <span class="p">==</span> <span class="s">"HR"</span><span class="p">);</span>
            <span class="n">result</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Contain</span><span class="p">(</span><span class="n">d</span> <span class="p">=&gt;</span> <span class="n">d</span><span class="p">.</span><span class="n">Name</span> <span class="p">==</span> <span class="s">"IT"</span><span class="p">);</span>
            <span class="n">result</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Contain</span><span class="p">(</span><span class="n">d</span> <span class="p">=&gt;</span> <span class="n">d</span><span class="p">.</span><span class="n">Name</span> <span class="p">==</span> <span class="s">"Finance"</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">GetDepartmentByIdAsync_WithValidId_ReturnsDepartment</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">result</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_service</span><span class="p">.</span><span class="nf">GetDepartmentByIdAsync</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>

            <span class="c1">// Assert</span>
            <span class="n">result</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">NotBeNull</span><span class="p">();</span>
            <span class="n">result</span><span class="p">!.</span><span class="n">Name</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="s">"HR"</span><span class="p">);</span>
            <span class="n">result</span><span class="p">.</span><span class="n">Description</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="s">"Human Resources"</span><span class="p">);</span>
            <span class="n">result</span><span class="p">.</span><span class="n">IsActive</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">BeTrue</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">GetDepartmentByIdAsync_WithInvalidId_ReturnsNull</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">result</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_service</span><span class="p">.</span><span class="nf">GetDepartmentByIdAsync</span><span class="p">(</span><span class="m">999</span><span class="p">);</span>

            <span class="c1">// Assert</span>
            <span class="n">result</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">BeNull</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">CreateDepartmentAsync_WithValidData_CreatesDepartment</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Arrange</span>
            <span class="kt">var</span> <span class="n">createDto</span> <span class="p">=</span> <span class="k">new</span> <span class="n">CreateDepartmentDto</span>
            <span class="p">{</span>
                <span class="n">Name</span> <span class="p">=</span> <span class="s">"New Department"</span><span class="p">,</span>
                <span class="n">Description</span> <span class="p">=</span> <span class="s">"A new test department"</span><span class="p">,</span>
                <span class="n">IsActive</span> <span class="p">=</span> <span class="k">true</span>
            <span class="p">};</span>

            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">result</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_service</span><span class="p">.</span><span class="nf">CreateDepartmentAsync</span><span class="p">(</span><span class="n">createDto</span><span class="p">);</span>

            <span class="c1">// Assert</span>
            <span class="n">result</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">NotBeNull</span><span class="p">();</span>
            <span class="n">result</span><span class="p">.</span><span class="n">Name</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="s">"New Department"</span><span class="p">);</span>
            <span class="n">result</span><span class="p">.</span><span class="n">Description</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="s">"A new test department"</span><span class="p">);</span>
            <span class="n">result</span><span class="p">.</span><span class="n">IsActive</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">BeTrue</span><span class="p">();</span>
            <span class="n">result</span><span class="p">.</span><span class="n">DepartmentId</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">BeGreaterThan</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>

            <span class="c1">// Verify it was actually saved</span>
            <span class="kt">var</span> <span class="n">savedDepartment</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_context</span><span class="p">.</span><span class="n">Departments</span><span class="p">.</span><span class="nf">FindAsync</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">DepartmentId</span><span class="p">);</span>
            <span class="n">savedDepartment</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">NotBeNull</span><span class="p">();</span>
            <span class="n">savedDepartment</span><span class="p">!.</span><span class="n">Name</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">Be</span><span class="p">(</span><span class="s">"New Department"</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">DeleteDepartmentAsync_WithValidId_DeletesDepartment</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">result</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_service</span><span class="p">.</span><span class="nf">DeleteDepartmentAsync</span><span class="p">(</span><span class="m">3</span><span class="p">);</span> <span class="c1">// Delete Finance department</span>

            <span class="c1">// Assert</span>
            <span class="n">result</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">BeTrue</span><span class="p">();</span>

            <span class="c1">// Verify it was actually deleted</span>
            <span class="kt">var</span> <span class="n">deletedDepartment</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_context</span><span class="p">.</span><span class="n">Departments</span><span class="p">.</span><span class="nf">FindAsync</span><span class="p">(</span><span class="m">3</span><span class="p">);</span>
            <span class="n">deletedDepartment</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">BeNull</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">DeleteDepartmentAsync_WithInvalidId_ReturnsFalse</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">result</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_service</span><span class="p">.</span><span class="nf">DeleteDepartmentAsync</span><span class="p">(</span><span class="m">999</span><span class="p">);</span>

            <span class="c1">// Assert</span>
            <span class="n">result</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">BeFalse</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">DepartmentExistsAsync_WithValidId_ReturnsTrue</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">result</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_service</span><span class="p">.</span><span class="nf">DepartmentExistsAsync</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>

            <span class="c1">// Assert</span>
            <span class="n">result</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">BeTrue</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">DepartmentExistsAsync_WithInvalidId_ReturnsFalse</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">result</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_service</span><span class="p">.</span><span class="nf">DepartmentExistsAsync</span><span class="p">(</span><span class="m">999</span><span class="p">);</span>

            <span class="c1">// Assert</span>
            <span class="n">result</span><span class="p">.</span><span class="nf">Should</span><span class="p">().</span><span class="nf">BeFalse</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">Dispose</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">_context</span><span class="p">.</span><span class="nf">Dispose</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Run All Tests:</strong></p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Navigate to test project directory</span><span class="w">
</span><span class="n">cd</span><span class="w"> </span><span class="nx">HRM.Tests</span><span class="w">

</span><span class="c"># Run all tests</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">test</span><span class="w">

</span><span class="c"># Run tests with verbose output</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nt">--verbosity</span><span class="w"> </span><span class="nx">normal</span><span class="w">

</span><span class="c"># Run tests and generate coverage report</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nt">--collect</span><span class="p">:</span><span class="s2">"XPlat Code Coverage"</span><span class="w">

</span><span class="c"># Run specific test class</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nt">--filter</span><span class="w"> </span><span class="s2">"DepartmentControllerTests"</span><span class="w">

</span><span class="c"># Run specific test method</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nt">--filter</span><span class="w"> </span><span class="s2">"GetDepartments_ReturnsSuccessAndCorrectContentType"</span><span class="w">

</span><span class="c"># Run tests by category</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nt">--filter</span><span class="w"> </span><span class="s2">"Category=Integration"</span><span class="w">
</span></code></pre></div></div>

<p><strong>Run Tests for Different Environments:</strong></p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Test against Development environment database</span><span class="w">
</span><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">ASPNETCORE_ENVIRONMENT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Development"</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nt">--settings</span><span class="w"> </span><span class="nx">test.runsettings</span><span class="w">

</span><span class="c"># Test against QA environment database  </span><span class="w">
</span><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">ASPNETCORE_ENVIRONMENT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"QA"</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nt">--settings</span><span class="w"> </span><span class="nx">test.runsettings</span><span class="w">
</span></code></pre></div></div>

<p><strong>Create Test Configuration:</strong></p>

<p>Create <code class="language-plaintext highlighter-rouge">HRM.Tests/test.runsettings</code>:</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;RunSettings&gt;</span>
  <span class="nt">&lt;DataCollectionRunSettings&gt;</span>
    <span class="nt">&lt;DataCollectors&gt;</span>
      <span class="nt">&lt;DataCollector</span> <span class="na">friendlyName=</span><span class="s">"XPlat code coverage"</span> <span class="na">uri=</span><span class="s">"datacollector://Microsoft/CodeCoverage/2.0"</span> <span class="na">assemblyQualifiedName=</span><span class="s">"Microsoft.CodeCoverage.Extensions.DataCollectors.DotNetCodeCoverageCollector, Microsoft.CodeCoverage.Extensions, Version=15.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;Configuration&gt;</span>
          <span class="nt">&lt;Format&gt;</span>json,cobertura,lcov,teamcity,opencover<span class="nt">&lt;/Format&gt;</span>
        <span class="nt">&lt;/Configuration&gt;</span>
      <span class="nt">&lt;/DataCollector&gt;</span>
    <span class="nt">&lt;/DataCollectors&gt;</span>
  <span class="nt">&lt;/DataCollectionRunSettings&gt;</span>
<span class="nt">&lt;/RunSettings&gt;</span>
</code></pre></div></div>

<p><strong>Test Output Analysis:</strong></p>

<p>Expected test results should show:</p>
<ul>
  <li>✅ <strong>Integration Tests</strong>: Verify API endpoints work correctly across environments</li>
  <li>✅ <strong>Unit Tests</strong>: Validate business logic in isolation with in-memory database</li>
  <li>✅ <strong>Code Coverage</strong>: Measure how much of your code is tested</li>
  <li>✅ <strong>Performance</strong>: Ensure tests run quickly (under 30 seconds total)</li>
</ul>

<p><strong>Benefits of This Testing Approach:</strong></p>
<ul>
  <li><strong>Isolation</strong>: Each test uses fresh in-memory database</li>
  <li><strong>Speed</strong>: Fast execution without real database overhead</li>
  <li><strong>Reliability</strong>: Consistent results across different environments</li>
  <li><strong>Coverage</strong>: Both API layer (integration) and service layer (unit) testing</li>
  <li><strong>CI/CD Ready</strong>: Can run in automated build pipelines</li>
</ul>

<p><strong>Create PowerShell Automation Script:</strong></p>

<p>Create <code class="language-plaintext highlighter-rouge">Scripts/Test-HRM-API.ps1</code>:</p>
<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">param</span><span class="p">(</span><span class="w">
    </span><span class="p">[</span><span class="n">string</span><span class="p">]</span><span class="nv">$Environment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Development"</span><span class="p">,</span><span class="w">
    </span><span class="p">[</span><span class="n">string</span><span class="p">]</span><span class="nv">$BaseUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"http://localhost:5152"</span><span class="w">
</span><span class="p">)</span><span class="w">

</span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"=======================================</span><span class="se">`n</span><span class="s2">"</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Cyan</span><span class="w">
</span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"HRM API AUTOMATED TEST SUITE</span><span class="se">`n</span><span class="s2">"</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Yellow</span><span class="w">
</span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Environment: </span><span class="nv">$Environment</span><span class="se">`n</span><span class="s2">"</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Green</span><span class="w">
</span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Base URL: </span><span class="nv">$BaseUrl</span><span class="se">`n</span><span class="s2">"</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Green</span><span class="w">
</span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"======================================="</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Cyan</span><span class="w">

</span><span class="nv">$tests</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@()</span><span class="w">
</span><span class="nv">$startTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Get-Date</span><span class="w">

</span><span class="c"># Test 1: Get all departments</span><span class="w">
</span><span class="kr">try</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nv">$response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Invoke-RestMethod</span><span class="w"> </span><span class="nt">-Uri</span><span class="w"> </span><span class="s2">"</span><span class="nv">$BaseUrl</span><span class="s2">/api/departments"</span><span class="w"> </span><span class="nt">-Method</span><span class="w"> </span><span class="nx">Get</span><span class="w">
    </span><span class="nv">$tests</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">@{</span><span class="w"> </span><span class="nx">Name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Get Departments"</span><span class="p">;</span><span class="w"> </span><span class="nx">Status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"PASS"</span><span class="p">;</span><span class="w"> </span><span class="nx">Count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$response</span><span class="err">.</span><span class="nx">Count</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"✅ Get Departments: PASSED (</span><span class="si">$(</span><span class="nv">$response</span><span class="o">.</span><span class="nf">Count</span><span class="si">)</span><span class="s2"> departments)"</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Green</span><span class="w">
</span><span class="p">}</span><span class="w"> </span><span class="kr">catch</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nv">$tests</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">@{</span><span class="w"> </span><span class="nx">Name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Get Departments"</span><span class="p">;</span><span class="w"> </span><span class="nx">Status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"FAIL"</span><span class="p">;</span><span class="w"> </span><span class="nx">Error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$_</span><span class="err">.</span><span class="nx">Exception</span><span class="err">.</span><span class="nx">Message</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"❌ Get Departments: FAILED - </span><span class="si">$(</span><span class="bp">$_</span><span class="o">.</span><span class="nf">Exception</span><span class="o">.</span><span class="nf">Message</span><span class="si">)</span><span class="s2">"</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Red</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c"># Test 2: Get all employees</span><span class="w">
</span><span class="kr">try</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nv">$response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Invoke-RestMethod</span><span class="w"> </span><span class="nt">-Uri</span><span class="w"> </span><span class="s2">"</span><span class="nv">$BaseUrl</span><span class="s2">/api/employees"</span><span class="w"> </span><span class="nt">-Method</span><span class="w"> </span><span class="nx">Get</span><span class="w">
    </span><span class="nv">$tests</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">@{</span><span class="w"> </span><span class="nx">Name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Get Employees"</span><span class="p">;</span><span class="w"> </span><span class="nx">Status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"PASS"</span><span class="p">;</span><span class="w"> </span><span class="nx">Count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$response</span><span class="err">.</span><span class="nx">Count</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"✅ Get Employees: PASSED (</span><span class="si">$(</span><span class="nv">$response</span><span class="o">.</span><span class="nf">Count</span><span class="si">)</span><span class="s2"> employees)"</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Green</span><span class="w">
</span><span class="p">}</span><span class="w"> </span><span class="kr">catch</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nv">$tests</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">@{</span><span class="w"> </span><span class="nx">Name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Get Employees"</span><span class="p">;</span><span class="w"> </span><span class="nx">Status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"FAIL"</span><span class="p">;</span><span class="w"> </span><span class="nx">Error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$_</span><span class="err">.</span><span class="nx">Exception</span><span class="err">.</span><span class="nx">Message</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"❌ Get Employees: FAILED - </span><span class="si">$(</span><span class="bp">$_</span><span class="o">.</span><span class="nf">Exception</span><span class="o">.</span><span class="nf">Message</span><span class="si">)</span><span class="s2">"</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Red</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c"># Test 3: Create department</span><span class="w">
</span><span class="kr">try</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nv">$newDept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@{</span><span class="w">
        </span><span class="nx">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Test Department </span><span class="si">$(</span><span class="n">Get-Random</span><span class="p">)</span><span class="s2">"</span><span class="w">
        </span><span class="nx">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Automated test department"</span><span class="w">
        </span><span class="nx">isActive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$true</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ConvertTo-Json</span><span class="w">
    
    </span><span class="nv">$response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Invoke-RestMethod</span><span class="w"> </span><span class="nt">-Uri</span><span class="w"> </span><span class="s2">"</span><span class="nv">$BaseUrl</span><span class="s2">/api/departments"</span><span class="w"> </span><span class="nt">-Method</span><span class="w"> </span><span class="nx">Post</span><span class="w"> </span><span class="nt">-Body</span><span class="w"> </span><span class="nv">$newDept</span><span class="w"> </span><span class="nt">-ContentType</span><span class="w"> </span><span class="s2">"application/json"</span><span class="w">
    </span><span class="nv">$tests</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">@{</span><span class="w"> </span><span class="nx">Name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Create Department"</span><span class="p">;</span><span class="w"> </span><span class="nx">Status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"PASS"</span><span class="p">;</span><span class="w"> </span><span class="nx">Id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$response</span><span class="err">.</span><span class="nx">departmentId</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"✅ Create Department: PASSED (ID: </span><span class="si">$(</span><span class="nv">$response</span><span class="o">.</span><span class="nf">departmentId</span><span class="si">)</span><span class="s2">)"</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Green</span><span class="w">
</span><span class="p">}</span><span class="w"> </span><span class="kr">catch</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nv">$tests</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">@{</span><span class="w"> </span><span class="nx">Name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Create Department"</span><span class="p">;</span><span class="w"> </span><span class="nx">Status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"FAIL"</span><span class="p">;</span><span class="w"> </span><span class="nx">Error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$_</span><span class="err">.</span><span class="nx">Exception</span><span class="err">.</span><span class="nx">Message</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"❌ Create Department: FAILED - </span><span class="si">$(</span><span class="bp">$_</span><span class="o">.</span><span class="nf">Exception</span><span class="o">.</span><span class="nf">Message</span><span class="si">)</span><span class="s2">"</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Red</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c"># Calculate summary</span><span class="w">
</span><span class="nv">$endTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Get-Date</span><span class="w">
</span><span class="nv">$duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nv">$endTime</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">$startTime</span><span class="p">)</span><span class="o">.</span><span class="nf">TotalSeconds</span><span class="w">
</span><span class="nv">$passedTests</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nv">$tests</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Where-Object</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="bp">$_</span><span class="o">.</span><span class="nf">Status</span><span class="w"> </span><span class="o">-eq</span><span class="w"> </span><span class="s2">"PASS"</span><span class="w"> </span><span class="p">})</span><span class="o">.</span><span class="nf">Count</span><span class="w">
</span><span class="nv">$failedTests</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nv">$tests</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Where-Object</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="bp">$_</span><span class="o">.</span><span class="nf">Status</span><span class="w"> </span><span class="o">-eq</span><span class="w"> </span><span class="s2">"FAIL"</span><span class="w"> </span><span class="p">})</span><span class="o">.</span><span class="nf">Count</span><span class="w">
</span><span class="nv">$successRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">math</span><span class="p">]::</span><span class="n">Round</span><span class="p">((</span><span class="nv">$passedTests</span><span class="w"> </span><span class="n">/</span><span class="w"> </span><span class="nv">$tests</span><span class="o">.</span><span class="nf">Count</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">100</span><span class="p">,</span><span class="w"> </span><span class="nx">2</span><span class="p">)</span><span class="w">

</span><span class="c"># Display summary</span><span class="w">
</span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"</span><span class="se">`n</span><span class="s2">======================================="</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Cyan</span><span class="w">
</span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"TEST SUMMARY"</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Yellow</span><span class="w">
</span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"======================================="</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Cyan</span><span class="w">
</span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Duration: </span><span class="nv">$duration</span><span class="s2"> seconds"</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">White</span><span class="w">
</span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Total Tests: </span><span class="si">$(</span><span class="nv">$tests</span><span class="o">.</span><span class="nf">Count</span><span class="si">)</span><span class="s2">"</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">White</span><span class="w">
</span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Passed: </span><span class="nv">$passedTests</span><span class="s2">"</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Green</span><span class="w">
</span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Failed: </span><span class="nv">$failedTests</span><span class="s2">"</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Red</span><span class="w">
</span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Success Rate: </span><span class="nv">$successRate</span><span class="s2">%"</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="err">$</span><span class="p">(</span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$successRate</span><span class="w"> </span><span class="o">-ge</span><span class="w"> </span><span class="mi">80</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"Green"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"Red"</span><span class="w"> </span><span class="p">})</span><span class="w">
</span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"======================================="</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Cyan</span><span class="w">

</span><span class="kr">return</span><span class="w"> </span><span class="nv">$successRate</span><span class="w"> </span><span class="o">-ge</span><span class="w"> </span><span class="mi">80</span><span class="w">
</span></code></pre></div></div>

<p><strong>Run Automated Tests:</strong></p>
<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Test Development environment</span><span class="w">
</span><span class="n">cd</span><span class="w"> </span><span class="nx">HRM.Tests\Scripts</span><span class="w">
</span><span class="o">.</span><span class="n">\Test-HRM-API.ps1</span><span class="w"> </span><span class="nt">-Environment</span><span class="w"> </span><span class="s2">"Development"</span><span class="w"> </span><span class="nt">-BaseUrl</span><span class="w"> </span><span class="s2">"http://localhost:5152"</span><span class="w">

</span><span class="c"># Test QA environment</span><span class="w">
</span><span class="o">.</span><span class="n">\Test-HRM-API.ps1</span><span class="w"> </span><span class="nt">-Environment</span><span class="w"> </span><span class="s2">"QA"</span><span class="w"> </span><span class="nt">-BaseUrl</span><span class="w"> </span><span class="s2">"http://localhost:5153"</span><span class="w">

</span><span class="c"># Test Production environment</span><span class="w">
</span><span class="o">.</span><span class="n">\Test-HRM-API.ps1</span><span class="w"> </span><span class="nt">-Environment</span><span class="w"> </span><span class="s2">"Production"</span><span class="w"> </span><span class="nt">-BaseUrl</span><span class="w"> </span><span class="s2">"http://localhost:5154"</span><span class="w">
</span></code></pre></div></div>

<p><strong>Step 12: Environment Diagnostics and CORS Configuration</strong></p>

<p><strong>Add Environment Diagnostics (Development only):</strong></p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Add to Program.cs for debugging</span>
<span class="k">if</span> <span class="p">(</span><span class="n">app</span><span class="p">.</span><span class="n">Environment</span><span class="p">.</span><span class="nf">IsDevelopment</span><span class="p">())</span>
<span class="p">{</span>
    <span class="n">app</span><span class="p">.</span><span class="nf">MapGet</span><span class="p">(</span><span class="s">"/env"</span><span class="p">,</span> <span class="p">(</span><span class="n">IConfiguration</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">IWebHostEnvironment</span> <span class="n">env</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="p">{</span>
        <span class="n">Environment</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">EnvironmentName</span><span class="p">,</span>
        <span class="n">Connection</span> <span class="p">=</span> <span class="n">cfg</span><span class="p">.</span><span class="nf">GetConnectionString</span><span class="p">(</span><span class="s">"DefaultConnection"</span><span class="p">),</span>
        <span class="n">ApiSettings</span> <span class="p">=</span> <span class="n">cfg</span><span class="p">.</span><span class="nf">GetSection</span><span class="p">(</span><span class="s">"ApiSettings"</span><span class="p">).</span><span class="n">Get</span><span class="p">&lt;</span><span class="kt">object</span><span class="p">&gt;()</span>
    <span class="p">});</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Configure CORS per Environment:</strong>
Update <code class="language-plaintext highlighter-rouge">appsettings.json</code> files to include CORS settings:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"SecuritySettings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"EnableCors"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"AllowedOrigins"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"http://localhost:3000"</span><span class="p">,</span><span class="w"> </span><span class="s2">"https://localhost:3001"</span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><strong>Step 13: CI/CD Deployment Strategy</strong></p>

<p><strong>Build and Deployment Pipeline:</strong></p>
<ul>
  <li>Build once, promote through Dev → QA → Prod</li>
  <li>Override connection strings using environment variables in deployment</li>
  <li>Execute database migrations during deployment with proper approvals</li>
  <li>Run automated smoke tests after each deployment</li>
</ul>

<p><strong>Environment Variable Overrides:</strong></p>
<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Override connection string in production</span><span class="w">
</span><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">ConnectionStrings__DefaultConnection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Server=prod-server;Database=HRM_Prod;..."</span><span class="w">

</span><span class="c"># Override API settings</span><span class="w">
</span><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">ApiSettings__EnableSwagger</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"false"</span><span class="w">
</span><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">ApiSettings__EnableDetailedErrors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"false"</span><span class="w">
</span></code></pre></div></div>

<p><strong>Post-Deployment Smoke Tests:</strong></p>
<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Verify deployment with automated tests</span><span class="w">
</span><span class="o">.</span><span class="n">\Test-HRM-API.ps1</span><span class="w"> </span><span class="nt">-Environment</span><span class="w"> </span><span class="s2">"Production"</span><span class="w"> </span><span class="nt">-BaseUrl</span><span class="w"> </span><span class="s2">"https://api.company.com"</span><span class="w">

</span><span class="c"># Expected: GET /api/departments returns 200 with seeded data</span><span class="w">
</span><span class="c"># Expected: All critical endpoints respond within acceptable time limits</span><span class="w">
</span></code></pre></div></div>

<p><strong>Step 10: Troubleshooting</strong></p>
<ul>
  <li>SQL connection errors: verify port 1433, credentials, and <code class="language-plaintext highlighter-rouge">TrustServerCertificate=true</code> (or configure certificates).</li>
  <li>Missing tables: ensure migrations applied; consider switching from <code class="language-plaintext highlighter-rouge">EnsureCreated()</code> to <code class="language-plaintext highlighter-rouge">Database.Migrate()</code>.</li>
  <li>No Swagger: available only in Development via <code class="language-plaintext highlighter-rouge">MapOpenApi()</code>.</li>
</ul>

<hr />

<p><strong>Appendix: Quick command reference (PowerShell)</strong></p>

<pre><code class="language-ps1"># Set environment
$env:ASPNETCORE_ENVIRONMENT = "Development"  # QA | Production

# Apply migrations
dotnet ef database update --project HRM.API.csproj --startup-project HRM.API.csproj

# Run
dotnet run
</code></pre>

<p>That’s it—your HRM API now has a clear, repeatable multi-environment workflow with ASP.NET Core and SQL Server.</p>

<hr />

<p><strong>Note: How to use VS Code REST Client</strong></p>

<p><strong>Step 1: Install REST Client Extension</strong></p>
<ol>
  <li>Open VS Code</li>
  <li>Go to Extensions (Ctrl+Shift+X)</li>
  <li>Search for “REST Client” by Huachao Mao</li>
  <li>Click Install</li>
</ol>

<p><strong>Step 2: Create HTTP Request Files</strong>
Create <code class="language-plaintext highlighter-rouge">HRM.API/Tests/api-tests.http</code> in your project:</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">@baseUrl = http://localhost:5152
@contentType = application/json

### Development Environment Variables
# @name dev
@devUrl = http://localhost:5152

### QA Environment Variables  
# @name qa
@qaUrl = http://localhost:5153

### Production Environment Variables
# @name prod
@prodUrl = http://localhost:5154

### ============================================
### DEPARTMENT ENDPOINTS
### ============================================

### Get all departments (Development)
GET /api/departments
Accept: 

### Get all departments (QA)
GET /api/departments
Accept: 

### Get department by ID
GET /api/departments/1
Accept: 

### Create new department
POST /api/departments
Content-Type: 

{
  "name": "Quality Assurance",
  "description": "Software testing and quality control",
  "isActive": true
}

### ============================================
### EMPLOYEE ENDPOINTS  
### ============================================

### Get all employees
GET /api/employees
Accept: 

### Get employee by ID
GET /api/employees/1
Accept: 

### Create new employee
POST /api/employees
Content-Type: 

{
  "firstName": "Jane",
  "lastName": "Smith", 
  "email": "jane.smith@company.com",
  "phoneNumber": "+1-555-5678",
  "hireDate": "2024-10-12T00:00:00",
  "salary": 80000.00,
  "departmentId": 1
}

### Update employee
PUT /api/employees/1
Content-Type: 

{
  "employeeId": 1,
  "firstName": "Jane",
  "lastName": "Smith-Updated",
  "email": "jane.smith@company.com", 
  "phoneNumber": "+1-555-5678",
  "hireDate": "2024-10-12T00:00:00",
  "salary": 85000.00,
  "departmentId": 1
}

### Delete employee
DELETE /api/employees/1

### ============================================
### ENVIRONMENT-SPECIFIC TESTING
### ============================================

### Test Development Environment Health
GET /env
Accept: 

### Test QA Environment
GET /api/departments
Accept: 

### Test Production Environment  
GET /api/departments
Accept: 
</span></code></pre></div></div>

<p><strong>Step 3: Create Environment-Specific Request Files</strong></p>

<p>Create <code class="language-plaintext highlighter-rouge">HRM.API/Tests/development.http</code>:</p>
<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">@baseUrl = http://localhost:5152
@environment = Development

### Get all departments
GET /api/departments

### Environment diagnostics (Development only)
GET /env

### Create test department
POST /api/departments
Content-Type: application/json

{
  "name": "Test Dept ",
  "description": "Auto-generated test department",
  "isActive": true
}
</span></code></pre></div></div>

<p>Create <code class="language-plaintext highlighter-rouge">HRM.API/Tests/qa.http</code>:</p>
<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">@baseUrl = http://localhost:5153
@environment = QA

### Get all departments
GET /api/departments

### Get all employees
GET /api/employees

### Create QA test data
POST /api/departments
Content-Type: application/json

{
  "name": "QA Test Department",
  "description": "Department for QA testing purposes",
  "isActive": true
}
</span></code></pre></div></div>

<p><strong>Step 4: How to Use REST Client</strong></p>

<ol>
  <li><strong>Start your API in the desired environment:</strong>
    <div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">ASPNETCORE_ENVIRONMENT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Development"</span><span class="w">
</span><span class="n">dotnet</span><span class="w"> </span><span class="nx">run</span><span class="w"> </span><span class="nt">--launch-profile</span><span class="w"> </span><span class="nx">development</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li><strong>Open the .http file in VS Code</strong></li>
  <li><strong>Click “Send Request” above any HTTP request</strong>
    <ul>
      <li>You’ll see a clickable “Send Request” link above each <code class="language-plaintext highlighter-rouge">###</code> section</li>
      <li>Or use <code class="language-plaintext highlighter-rouge">Ctrl+Alt+R</code> keyboard shortcut</li>
    </ul>
  </li>
  <li><strong>View responses in the right panel:</strong>
    <ul>
      <li>Response status, headers, and body will appear</li>
      <li>JSON responses are automatically formatted</li>
    </ul>
  </li>
  <li><strong>Use variables for different environments:</strong>
    <ul>
      <li>Change <code class="language-plaintext highlighter-rouge">@baseUrl</code> variable to switch environments</li>
      <li>Use `` for dynamic test data</li>
    </ul>
  </li>
</ol>

<p><strong>Step 5: Advanced REST Client Features</strong></p>

<p>Create <code class="language-plaintext highlighter-rouge">HRM.API/Tests/advanced-tests.http</code>:</p>
<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">@baseUrl = http://localhost:5152

### Create department and store ID for later use
# @name createDept
POST /api/departments
Content-Type: application/json

{
  "name": "REST Client Test Dept",
  "description": "Created via REST Client",
  "isActive": true
}

### Use the created department ID in subsequent requests
@deptId = 

### Create employee in the new department
POST /api/employees
Content-Type: application/json

{
  "firstName": "REST",
  "lastName": "Client",
  "email": "rest.client@company.com",
  "phoneNumber": "+1-555-",
  "hireDate": "",
  "salary": 75000.00,
  "departmentId": 
}

### Clean up - delete the test department
DELETE /api/departments/
</span></code></pre></div></div>

<p><strong>Step 6: REST Client Settings</strong></p>

<p>Create <code class="language-plaintext highlighter-rouge">.vscode/settings.json</code> in your HRM project:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"rest-client.environmentVariables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"development"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"baseUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:5152"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"environment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Development"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"qa"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"baseUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:5153"</span><span class="p">,</span><span class="w"> 
      </span><span class="nl">"environment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"QA"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"production"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"baseUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:5154"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"environment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Production"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"rest-client.defaultHeaders"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"Accept"</span><span class="p">:</span><span class="w"> </span><span class="s2">"application/json"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Content-Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"application/json"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><strong>Step 7: Switch Between Environments</strong></p>

<ol>
  <li><strong>Use Command Palette:</strong> <code class="language-plaintext highlighter-rouge">Ctrl+Shift+P</code> → “REST Client: Switch Environment”</li>
  <li><strong>Select environment:</strong> development, qa, or production</li>
  <li><strong>All requests will use the selected environment variables</strong></li>
</ol>

<p><strong>Benefits of REST Client vs PowerShell:</strong></p>
<ul>
  <li>✅ <strong>Visual responses:</strong> Formatted JSON, status codes, headers</li>
  <li>✅ <strong>Request history:</strong> All past requests saved automatically</li>
  <li>✅ <strong>Variables:</strong> Chain requests and reuse response data</li>
  <li>✅ <strong>Environment switching:</strong> Easy toggle between Dev/QA/Prod</li>
  <li>✅ <strong>Syntax highlighting:</strong> Better readability than command line</li>
  <li>✅ <strong>Save/share:</strong> Commit .http files to version control for team sharing</li>
</ul>

<p><strong><a href="https://github.com/mahedee/code-sample02/tree/master/multi-env-app">Source code</a></strong></p>

        <!-- AdSense disabled: <!-- AdSense Disabled
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3654930341568980"
     crossorigin="anonymous"></script>
<!-- Horizontal Unit -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3654930341568980"
     data-ad-slot="7189599032"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
--> -->
        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#asp-net-core" class="page__taxonomy-item" rel="tag">asp-net-core</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#best-practices" class="page__taxonomy-item" rel="tag">best-practices</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#ci-cd" class="page__taxonomy-item" rel="tag">ci-cd</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#configuration" class="page__taxonomy-item" rel="tag">configuration</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#csharp" class="page__taxonomy-item" rel="tag">csharp</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#devops" class="page__taxonomy-item" rel="tag">devops</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#entity-framework" class="page__taxonomy-item" rel="tag">entity-framework</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#sql-server" class="page__taxonomy-item" rel="tag">sql-server</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#tutorial" class="page__taxonomy-item" rel="tag">tutorial</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#web-api" class="page__taxonomy-item" rel="tag">web-api</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#asp-net-core" class="page__taxonomy-item" rel="tag">ASP.NET Core</a><span class="sep">, </span>
    
      
      
      <a href="/categories/#c" class="page__taxonomy-item" rel="tag">C#</a><span class="sep">, </span>
    
      
      
      <a href="/categories/#software-architecture" class="page__taxonomy-item" rel="tag">Software Architecture</a><span class="sep">, </span>
    
      
      
      <a href="/categories/#tutorials" class="page__taxonomy-item" rel="tag">Tutorials</a><span class="sep">, </span>
    
      
      
      <a href="/categories/#web-api" class="page__taxonomy-item" rel="tag">Web API</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2025-06-08T00:00:00-04:00">June 08, 2025</time></p>
        
      </footer>

      <section class="page__share">
  

  <a href="https://twitter.com/intent/tweet?text=Developing+and+Testing+a+Multi-Environment+ASP.NET+Core+Application+with+SQL+Server%20https%3A%2F%2Fmahedee.net%2FDeveloping-and-Testing-a-Multi-Environment-ASP-NET-Core-Application-with-SQL-Server%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fmahedee.net%2FDeveloping-and-Testing-a-Multi-Environment-ASP-NET-Core-Application-with-SQL-Server%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fmahedee.net%2FDeveloping-and-Testing-a-Multi-Environment-ASP-NET-Core-Application-with-SQL-Server%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/Building-Professional-Report-Export-API-ASP-NET-Core-Excel-PDF-Word-Template-Architecture/" class="pagination--pager" title="Building a Professional Report Export API in ASP.NET Core: Excel, PDF &amp; Word Generation with Template Architecture
">Previous</a>
    
    
      <a href="/Binary_Tree_Traversal_Algorithms_using_java/" class="pagination--pager" title="Binary Tree Traversal Algorithms in Java: Complete Guide to Preorder, Inorder, Postorder, and Level Order Traversals
">Next</a>
    
  </nav>

    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">Comments</h4>
      <div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v18.0&appId=1641495303280571"></script>

<div class="fb-comments" 
     data-href="https://mahedee.net/Developing-and-Testing-a-Multi-Environment-ASP-NET-Core-Application-with-SQL-Server/" 
     data-width="100%" 
     data-numposts="10"
     data-colorscheme="light"
     data-order-by="social"
     data-mobile="true">
</div>
    
</div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/2010-01-01-could-not-access-network-location-systemdriveinetpubwwwroot/" rel="permalink">
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  2 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/post_banner01.jpeg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/social-media-images-jekyll-minimal-mistakes/" rel="permalink">How to Configure Social Media Images for Jekyll Minimal Mistakes Blog
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  8 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Learn how to configure social media images for your Jekyll Minimal Mistakes blog to get beautiful thumbnails when sharing articles on Facebook, LinkedIn, Twi...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/post_banner01.jpeg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/procedural-vs-object-oriented-programming/" rel="permalink">Procedural vs Object-Oriented Programming: Key Differences Explained
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  6 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Discover the key differences between procedural and OOP paradigms. Compare data organization, reusability, and real-world applications in software development.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/implementing-metrics-and-dashboards-dotnet-core-api-prometheus-grafana/" rel="permalink">Implementing Metrics and Dashboards for .NET Core APIs with Prometheus and Grafana
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  18 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Step-by-step tutorial to implement metrics and dashboards for .NET Core APIs using Prometheus and Grafana for effective monitoring.
</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>


      <!-- AdSense disabled:
      <ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3654930341568980"
     data-ad-slot="2244980843"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
     -->

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    <li><i class="fas fa-fw fa-award" aria-hidden="true"></i> <a href = "https://mvp.microsoft.com/en-us/PublicProfile/5001294">MVP Profile</a></li> 
    ||<li><i class="fas fa-fw fa-list-alt" aria-hidden="true"></i> <a href = "/categories/">Categories</a></li>
    ||<li><i class="fas fa-fw fa-code" aria-hidden="true"></i> <a href = "#">Programming</a></li>  
    ||<li><i class="fas fa-fw fa-globe" aria-hidden="true"></i> <a href = "/categories/#asp-net">ASP.NET</a></li> 
    ||<li><a href = "#">AI & ML</a></li>
    ||<li><a href = "#">Javascript</a></li>
    ||<li><a href = "#">Software Architecture</a></li>
    ||<li><a href = "#">Database</a></li>
    ||<li><a href = "#">OOP</a></li>
    ||<li><a href = "#">Design Pattern</a></li>  
    ||<li><a href = "#">Algorithm</a></li>
    ||<li><a href = "#">Interview Tips</a></li>
    ||<li><a href = "#">Opinions</a></li>
    ||<li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2026 Mahedee Hasan. 
  <!-- Powered by  -->
  <!-- <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>. -->
</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '', { 'anonymize_ip': false});
</script>











        <!-- AdSense disabled: Add sense code for all page : added globaly
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3654930341568980"
        crossorigin="anonymous"></script>
        -->

  </body>
</html>
